<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP 代理教程 | VIPTV 云视听</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/apple-icon-152x152.png">
    <meta name="description" content="VIPTV 云视听 - 跨平台极致体验，高清.流畅.简洁">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.0bd82295.css" as="style"><link rel="preload" href="/assets/js/app.7786b0ad.js" as="script"><link rel="preload" href="/assets/js/9.265af838.js" as="script"><link rel="preload" href="/assets/js/10.e3e2f078.js" as="script"><link rel="preload" href="/assets/js/50.2309846e.js" as="script"><link rel="preload" href="/assets/js/21.691822bf.js" as="script"><link rel="prefetch" href="/assets/js/1.586cd073.js"><link rel="prefetch" href="/assets/js/11.40099641.js"><link rel="prefetch" href="/assets/js/12.6872f794.js"><link rel="prefetch" href="/assets/js/13.505d5f9a.js"><link rel="prefetch" href="/assets/js/14.8d440e31.js"><link rel="prefetch" href="/assets/js/15.9401abc5.js"><link rel="prefetch" href="/assets/js/16.da53c7d0.js"><link rel="prefetch" href="/assets/js/17.002de79b.js"><link rel="prefetch" href="/assets/js/18.8b839dd9.js"><link rel="prefetch" href="/assets/js/19.3be10ad3.js"><link rel="prefetch" href="/assets/js/2.595fa0a7.js"><link rel="prefetch" href="/assets/js/20.1f6a93bf.js"><link rel="prefetch" href="/assets/js/22.89b0dc1e.js"><link rel="prefetch" href="/assets/js/23.240ba4c7.js"><link rel="prefetch" href="/assets/js/24.b855fbc8.js"><link rel="prefetch" href="/assets/js/25.383be82c.js"><link rel="prefetch" href="/assets/js/26.ceb369b1.js"><link rel="prefetch" href="/assets/js/27.e831c1ee.js"><link rel="prefetch" href="/assets/js/28.71096a05.js"><link rel="prefetch" href="/assets/js/29.173c7dd4.js"><link rel="prefetch" href="/assets/js/3.f30c8ba4.js"><link rel="prefetch" href="/assets/js/30.1b03a37f.js"><link rel="prefetch" href="/assets/js/31.0432f2c5.js"><link rel="prefetch" href="/assets/js/32.d74bb4f6.js"><link rel="prefetch" href="/assets/js/33.9efa86f7.js"><link rel="prefetch" href="/assets/js/34.4cd8535d.js"><link rel="prefetch" href="/assets/js/35.26884c6c.js"><link rel="prefetch" href="/assets/js/36.62982cd0.js"><link rel="prefetch" href="/assets/js/37.76f6dd53.js"><link rel="prefetch" href="/assets/js/38.b61b4cb4.js"><link rel="prefetch" href="/assets/js/39.70c97c44.js"><link rel="prefetch" href="/assets/js/4.e99a3521.js"><link rel="prefetch" href="/assets/js/40.f3fd8b6f.js"><link rel="prefetch" href="/assets/js/41.0d106b06.js"><link rel="prefetch" href="/assets/js/42.9cbdda60.js"><link rel="prefetch" href="/assets/js/43.73582bbc.js"><link rel="prefetch" href="/assets/js/44.97159ce1.js"><link rel="prefetch" href="/assets/js/45.f885c36c.js"><link rel="prefetch" href="/assets/js/46.79d50263.js"><link rel="prefetch" href="/assets/js/47.6cef4c25.js"><link rel="prefetch" href="/assets/js/48.898d321b.js"><link rel="prefetch" href="/assets/js/49.ab5366fa.js"><link rel="prefetch" href="/assets/js/5.7c610401.js"><link rel="prefetch" href="/assets/js/51.4063ea24.js"><link rel="prefetch" href="/assets/js/52.695d8963.js"><link rel="prefetch" href="/assets/js/53.a6e9beca.js"><link rel="prefetch" href="/assets/js/54.ef8a7547.js"><link rel="prefetch" href="/assets/js/55.789692c0.js"><link rel="prefetch" href="/assets/js/56.92bdf6c3.js"><link rel="prefetch" href="/assets/js/57.4dc8da78.js"><link rel="prefetch" href="/assets/js/58.d50ef152.js"><link rel="prefetch" href="/assets/js/59.d9f933af.js"><link rel="prefetch" href="/assets/js/6.5d2ae00f.js"><link rel="prefetch" href="/assets/js/60.2e9ce529.js"><link rel="prefetch" href="/assets/js/61.9ba8ff46.js"><link rel="prefetch" href="/assets/js/62.67a8ca9b.js"><link rel="prefetch" href="/assets/js/63.1194eb57.js"><link rel="prefetch" href="/assets/js/64.7967706d.js"><link rel="prefetch" href="/assets/js/65.195ca08b.js"><link rel="prefetch" href="/assets/js/66.cca2d474.js"><link rel="prefetch" href="/assets/js/67.3d2bf791.js"><link rel="prefetch" href="/assets/js/68.1caf4ed8.js"><link rel="prefetch" href="/assets/js/69.5b9c7ef8.js"><link rel="prefetch" href="/assets/js/70.4f552f46.js"><link rel="prefetch" href="/assets/js/71.17217ee8.js"><link rel="prefetch" href="/assets/js/72.4460cb94.js"><link rel="prefetch" href="/assets/js/73.1a991a7d.js"><link rel="prefetch" href="/assets/js/74.dc7eba06.js"><link rel="prefetch" href="/assets/js/vendors~search-page.c7cdcc91.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0bd82295.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="VIPTV 云视听" class="logo"> <span class="site-name can-hide">VIPTV 云视听</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档菜单" class="dropdown-title"><span class="title">官方文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link router-link-active">
  开发指引
</a></li><li class="dropdown-item"><!----> <a href="/source/" class="nav-link">
  收集资源
</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">
  关于我们
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关链接" class="dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          官方项目
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://viptvx.github.com/web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VIPTV WEB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://viptvx.github.com/wap" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VIPTV WAP
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://viptvx.github.com/pc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VIPTV PC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/viptvx/viptvx" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档菜单" class="dropdown-title"><span class="title">官方文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link router-link-active">
  开发指引
</a></li><li class="dropdown-item"><!----> <a href="/source/" class="nav-link">
  收集资源
</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">
  关于我们
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关链接" class="dropdown-title"><span class="title">相关链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          官方项目
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://viptvx.github.com/web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VIPTV WEB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://viptvx.github.com/wap" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VIPTV WAP
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://viptvx.github.com/pc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VIPTV PC
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/viptvx/viptvx" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/read.html" class="sidebar-link">介绍</a></li><li><a href="/guide/install.html" class="sidebar-link">开发前准备</a></li><li><a href="/guide/tools.html" class="sidebar-link">收集各类工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>高阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/plays.html" class="sidebar-link">JS播放器组件代码</a></li><li><a href="/guide/jiexi.html" class="sidebar-link">各类解析封装</a></li><li><a href="/guide/phpdl.html" aria-current="page" class="active sidebar-link">PHP 代理教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/phpdl.html#奥点-广电-云代理php源码" class="sidebar-link">奥点（广电）云代理php源码</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#韩国kbs直播代理php源码" class="sidebar-link">韩国KBS直播代理php源码</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#txt文本源-批量替换链接-php代码" class="sidebar-link">txt文本源，批量替换链接，php代码</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#掌上南昌php代理源码" class="sidebar-link">掌上南昌PHP代理源码</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#广电云长沙电视台节目源php代理" class="sidebar-link">广电云长沙电视台节目源PHP代理</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#_2021最新湖北电视台节目源php代理源码" class="sidebar-link">2021最新湖北电视台节目源PHP代理源码</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#自建企业微信消息推送通知通道接口php版" class="sidebar-link">自建企业微信消息推送通知通道接口PHP版</a></li><li class="sidebar-sub-header"><a href="/guide/phpdl.html#tvsou-节目指南-xmltv-格式的-php-源码" class="sidebar-link">tvsou 节目指南 xmltv 格式的 php 源码</a></li></ul></li><li><a href="/guide/css.html" class="sidebar-link">CSS 语法相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>接口</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/tv.html" class="sidebar-link">电视直播</a></li><li><a href="/guide/live.html" class="sidebar-link">体育直播API接口大全</a></li><li><a href="/guide/movie.html" class="sidebar-link">影视</a></li><li><a href="/guide/music.html" class="sidebar-link">酷狗音乐API数据分析</a></li><li><a href="/guide/book.html" class="sidebar-link">追书神器接口</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php-代理教程"><a href="#php-代理教程" class="header-anchor">#</a> PHP 代理教程</h1> <p>##北斗融媒(辽宁云)PHP</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 <span class="token variable">$id</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
 <span class="token variable">$ids</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token string double-quoted-string">&quot;cctv1&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;cctv1&quot;</span><span class="token punctuation">,</span><span class="token comment">//CCTV1</span>
    <span class="token string double-quoted-string">&quot;cctv4&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;cctv4&quot;</span><span class="token punctuation">,</span><span class="token comment">//CCTV4</span>
    <span class="token string double-quoted-string">&quot;cctv13&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;cctv13&quot;</span><span class="token punctuation">,</span><span class="token comment">//CCTV13</span>
    <span class="token string double-quoted-string">&quot;lnws&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;lntv&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽宁卫视</span>
    <span class="token string double-quoted-string">&quot;lnty&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;typd&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽宁体育</span>
    <span class="token string double-quoted-string">&quot;lnds&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;dspd&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽宁都市</span>
    <span class="token string double-quoted-string">&quot;lnys&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;yspd&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽宁影视剧</span>
    <span class="token string double-quoted-string">&quot;lnsh&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;shpd&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽宁生活</span>
    <span class="token string double-quoted-string">&quot;lnbf&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;bfpd&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽北方</span>
    <span class="token string double-quoted-string">&quot;lnjyqs&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;qspd&quot;</span><span class="token punctuation">,</span><span class="token comment">//辽宁教育青少</span>
    <span class="token string double-quoted-string">&quot;yjgw&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;yjgw&quot;</span><span class="token punctuation">,</span><span class="token comment">//宜家购物</span>
    <span class="token string double-quoted-string">&quot;yxjj&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;yxjj&quot;</span><span class="token punctuation">,</span><span class="token comment">//GTV游戏竞技</span>
    <span class="token string double-quoted-string">&quot;xdm&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;xdm&quot;</span><span class="token punctuation">,</span><span class="token comment">//新动漫</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token variable">$time</span> <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token variable">$m3u8</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;http://bdrmtvzb.lnyun.com.cn/bdrm/&quot;</span><span class="token operator">.</span><span class="token variable">$ids</span><span class="token punctuation">[</span><span class="token variable">$id</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;.m3u8?auth_key=&quot;</span><span class="token operator">.</span><span class="token variable">$time</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;-0-0-&quot;</span><span class="token operator">.</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/bdrm/&quot;</span><span class="token operator">.</span><span class="token variable">$ids</span><span class="token punctuation">[</span><span class="token variable">$id</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;.m3u8-&quot;</span><span class="token operator">.</span><span class="token variable">$time</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;-0-0-dPBxXGs7yIaSZG5m&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Location:'</span><span class="token operator">.</span><span class="token variable">$m3u8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="奥点-广电-云代理php源码"><a href="#奥点-广电-云代理php源码" class="header-anchor">#</a> 奥点（广电）云代理php源码</h2> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$id</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$url</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;http://1812501212048408.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/node-api.online/node-api/tv/channelInfo?id=&quot;</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$json</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$playurl</span> <span class="token operator">=</span> <span class="token variable">$json</span><span class="token operator">-&gt;</span><span class="token property">data</span><span class="token operator">-&gt;</span><span class="token property">hlsUrl</span><span class="token punctuation">;</span>

<span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;location: &quot;</span><span class="token operator">.</span><span class="token variable">$playurl</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="韩国kbs直播代理php源码"><a href="#韩国kbs直播代理php源码" class="header-anchor">#</a> 韩国KBS直播代理php源码</h2> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$id</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$ids</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
<span class="token string double-quoted-string">&quot;1&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;11&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;2&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;12&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;3&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;14&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;4&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;81&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;5&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;N91&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;6&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;N92&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;7&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;N93&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;8&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;N94&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;9&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;N96&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;10&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;21&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;11&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;22&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;12&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;23&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;13&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;24&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;14&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;25&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;15&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;26&quot;</span><span class="token punctuation">,</span>
<span class="token string double-quoted-string">&quot;16&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;I92&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;https://cfpwwwapi.kbs.co.kr/api/v1/landing/live/channel_code/&quot;</span><span class="token operator">.</span><span class="token variable">$ids</span><span class="token punctuation">[</span><span class="token variable">$id</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span> <span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_SSL_VERIFYPEER</span><span class="token punctuation">,</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_SSL_VERIFYHOST</span><span class="token punctuation">,</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token variable">$re</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'|service_url&quot;:&quot;(.*?)&quot;|i'</span><span class="token punctuation">,</span><span class="token variable">$re</span><span class="token punctuation">,</span><span class="token variable">$play</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Location:'</span><span class="token operator">.</span><span class="token variable">$play</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="txt文本源-批量替换链接-php代码"><a href="#txt文本源-批量替换链接-php代码" class="header-anchor">#</a> txt文本源，批量替换链接，php代码</h2> <p>有时在网上找的代理ID，需要替换代理链接时，不停的使用鼠标粘贴复制。费时费力，在网上找了下资料。特写了php代码批量替换txt文本里的链接。</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">//pl.php?url=111.com&amp;url2=222.com&amp;txt=333</span>
<span class="token comment">//使用方法把111.com换成你123.txt里面的链接，222.com换成需要替换新的链接，333是替换完成后在你服务器生成新的txt名称</span>
<span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$url2</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$txt</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'txt'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$info</span><span class="token operator">=</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'./123.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">,</span><span class="token variable">$url2</span><span class="token punctuation">,</span><span class="token variable">$info</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$a</span><span class="token punctuation">;</span>
	<span class="token variable">$c</span><span class="token operator">=</span> <span class="token string double-quoted-string">&quot;<span class="token interpolation"><span class="token variable">$a</span></span>&quot;</span><span class="token punctuation">;</span>
	<span class="token variable">$fp</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token variable">$txt</span><span class="token operator">.</span><span class="token string single-quoted-string">'.txt'</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">,</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="掌上南昌php代理源码"><a href="#掌上南昌php代理源码" class="header-anchor">#</a> 掌上南昌PHP代理源码</h2> <p>获取所有频道信息：http://zsnc.nctv.net.cn/api/contents/list?category_id=469&amp;page_size=20&amp;page=1
算法有点复杂。</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token variable">$_id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 1 2 3 4 </span>
<span class="token comment">//http://zsnc.nctv.net.cn/api/contents/list?category_id=469&amp;page_size=20&amp;page=1  获取所有频道信息</span>
<span class="token comment">//http://zsnc.nctv.net.cn/api/contents/info?id=126786  </span>
<span class="token variable">$channel_id</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'jw22cAZ'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'LfqghkO'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'an6J0sz'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'22zqwYf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 126784  126785 126786 126787 </span>
<span class="token variable">$_id</span> <span class="token operator">=</span> <span class="token variable">$channel_id</span> <span class="token punctuation">[</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$_id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$md52</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$_id</span><span class="token operator">.</span><span class="token string single-quoted-string">'Tidenctvzsncapp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$str3</span> <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sb</span> <span class="token operator">=</span> <span class="token variable">$sb</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md52</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$md53</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'tide'</span><span class="token operator">.</span><span class="token variable">$str3</span><span class="token operator">.</span><span class="token variable">$sb</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$replace</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'t='</span><span class="token operator">.</span><span class="token variable">$str3</span><span class="token operator">.</span><span class="token string single-quoted-string">'&amp;c='</span><span class="token operator">.</span><span class="token variable">$_id</span><span class="token operator">.</span><span class="token string single-quoted-string">'&amp;a=nctvzsncapp'</span><span class="token operator">.</span><span class="token string single-quoted-string">'&amp;v='</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md53</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md53</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md53</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md53</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$md53</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$replace</span> <span class="token operator">=</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$replace</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$replace</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'|'</span><span class="token punctuation">,</span><span class="token variable">$replace</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">preg_match_all</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/[1-9]/'</span><span class="token punctuation">,</span><span class="token variable">$replace</span><span class="token punctuation">,</span><span class="token variable">$trim</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$trim</span> <span class="token operator">=</span> <span class="token function">array_unique</span><span class="token punctuation">(</span><span class="token variable">$trim</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 <span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token variable">$replace</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$trim</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$intval</span> <span class="token operator">=</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$trim</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$intval</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
         
        <span class="token variable">$string2</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$replace</span><span class="token punctuation">,</span><span class="token variable">$intval</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'</span><span class="token punctuation">,</span><span class="token variable">$string2</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token variable">$indexOf</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'</span><span class="token punctuation">,</span><span class="token variable">$string2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token variable">$intval</span> <span class="token operator">*</span> <span class="token variable">$intval</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">52</span><span class="token punctuation">;</span>
             
 
            <span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token function">replaceSomeWhere</span><span class="token punctuation">(</span><span class="token variable">$str4</span><span class="token punctuation">,</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'</span><span class="token punctuation">,</span><span class="token variable">$indexOf</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable">$intval</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
     
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$string3</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$replace</span><span class="token punctuation">,</span><span class="token variable">$intval</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'</span><span class="token punctuation">,</span><span class="token variable">$string3</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token variable">$indexOf2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'</span><span class="token punctuation">,</span><span class="token variable">$string3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token variable">$intval</span> <span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">52</span><span class="token punctuation">;</span>
            <span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token function">replaceSomeWhere</span><span class="token punctuation">(</span><span class="token variable">$str4</span> <span class="token punctuation">,</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'</span><span class="token punctuation">,</span><span class="token variable">$indexOf2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable">$intval</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
     
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$bstrURL</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'http://mediaapi.nctv.net.cn/apiv3.2.3/m3u8.php?token='</span><span class="token operator">.</span><span class="token variable">$str4</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span> <span class="token variable">$bstrURL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_SSL_VERIFYPEER</span><span class="token punctuation">,</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_SSL_VERIFYHOST</span><span class="token punctuation">,</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_USERAGENT</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;User-Agent: Dalvik/2.1.0 (Linux; U; Android 6.0; 1505-A01 Build/MRA58K)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 妈的。这个地方恶心到我了。无敌！！！</span>
<span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$obj</span><span class="token operator">-&gt;</span><span class="token property">status</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'location:'</span><span class="token operator">.</span><span class="token variable">$obj</span><span class="token operator">-&gt;</span><span class="token property">address</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span>
<span class="token punctuation">{</span>
    <span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Refresh:0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 因为有个特别恶心的点，可能会出现token过期，所以让它刷新再获取。</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">function</span> <span class="token function">replaceSomeWhere</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token variable">$str2</span><span class="token punctuation">,</span><span class="token variable">$i</span><span class="token punctuation">)</span> <span class="token comment">// What the fuck!</span>
<span class="token punctuation">{</span>
    <span class="token variable">$str3</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
    <span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">!=</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$i</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$str3</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$str4</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
        <span class="token variable">$str3</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token variable">$str4</span><span class="token operator">.</span><span class="token variable">$str2</span><span class="token operator">.</span><span class="token variable">$str3</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><h2 id="广电云长沙电视台节目源php代理"><a href="#广电云长沙电视台节目源php代理" class="header-anchor">#</a> 广电云长沙电视台节目源PHP代理</h2> <p>访问地址格式：http://自己的服务器地址/hncs.php?id=XXX
id 频道
346 长沙新闻频道
348 长沙政法频道
349 长沙女性频道
350 长沙影视频道
354 长沙磁浮电视
355 长沙地铁电视
356 长沙嘉丽购物
357 长沙移动电视</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$id</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://1812501212048408.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/node-api.online/node-api/tv/channelInfo?id='</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/playUrl&quot;:&quot;(.*?)&quot;/'</span><span class="token punctuation">,</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token variable">$m</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'location:'</span><span class="token operator">.</span><span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token variable">$m</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_2021最新湖北电视台节目源php代理源码"><a href="#_2021最新湖北电视台节目源php代理源码" class="header-anchor">#</a> 2021最新湖北电视台节目源PHP代理源码</h2> <p>强调下这需要要 PHP 服务器来运行代码，奈何世人只爱鱼，不爱渔。自己动手对大部分人还是一个坎。</p> <p>id 频道
439 湖北美嘉购物
438 湖北垄上
437 湖北教育
436 湖北生活
435 湖北影视
434 湖北公共新闻
433 湖北综合
432 湖北经视
431 湖北卫视</p> <p>代理格式举例：http://你的服务器地址/hbtv.php?id=XXX</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">//id=439湖北美嘉购物 438湖北垄上 437湖北教育 436湖北生活 435湖北影视 434湖北公共新闻 433湖北综合 432湖北经视 431湖北卫视</span>
<span class="token variable">$id</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'http://app.cjyun.org/video/player/streamlist?site_id=10008&amp;live_type=1'</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$a</span><span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span><span class="token variable">$a</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">data</span><span class="token punctuation">[</span><span class="token variable">$a</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token operator">==</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$json</span><span class="token operator">=</span><span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">data</span><span class="token punctuation">[</span><span class="token variable">$a</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token property">play_url</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'location:'</span><span class="token operator">.</span><span class="token variable">$json</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="自建企业微信消息推送通知通道接口php版"><a href="#自建企业微信消息推送通知通道接口php版" class="header-anchor">#</a> 自建企业微信消息推送通知通道接口PHP版</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?php
 
$corpid = $_REQUEST['corpid']; //企业id
$corpsecret = $_REQUEST['corpsecret']; //应用secret
$agentid = $_REQUEST['agentid']; //应用id 
//如果就自己用，可以把参数写到这里。
//$corpid = '';
//$corpsecret = '';
//$agentid = ;
 
$title = $_REQUEST['title']; //消息title
$description = $_REQUEST['description']; //消息内容
$description = str_replace(PHP_EOL, '&lt;br&gt;', $description);
$url = $_REQUEST['url']; //消息跳转url
 
if(!$corpid or !$corpsecret or !$agentid){
    exit(&quot;canshu buquan&quot;);
}
 
//获取access_token
$response = CurlGet(&quot;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=$corpid&amp;corpsecret=$corpsecret&quot;,&quot;&quot;,&quot;&quot;);
 
$access_token = json_decode($response)-&gt;access_token;
if(!$access_token){
    exit(&quot;canshu cuowu&quot;);
}else{
 
    $json = '{&quot;touser&quot;:&quot;@all&quot;,&quot;msgtype&quot;:&quot;textcard&quot;,&quot;agentid&quot;:&quot;&quot;,&quot;textcard&quot;:{&quot;title&quot;:&quot;&quot;,&quot;description&quot;:&quot;&quot;,&quot;url&quot;:&quot;&quot;,&quot;btntxt&quot;:&quot;更多&quot;},&quot;safe&quot;:1,&quot;enable_id_trans&quot;:0,&quot;enable_duplicate_check&quot;:0}';
    $json = json_decode($json);
 
    $json-&gt;agentid = $agentid;
    $json-&gt;textcard-&gt;title = $title ? $title : '无标题';
    $json-&gt;textcard-&gt;description = $description ? $description : '无内容';
    
    $json-&gt;textcard-&gt;url = $url ? $url : 'URL';
 
    echo CurlPost(&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=$access_token&quot;,&quot;&quot;, json_encode($json));
}
 
function CurlGet($url,$cookies = &quot;&quot;,$UserAgent = &quot;&quot;)
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);
        curl_setopt($curl, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );
    curl_setopt($curl, CURLOPT_URL, $url);     
        curl_setopt($curl, CURLOPT_REFERER, '');
        curl_setopt($curl, CURLOPT_COOKIE, $cookies);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    if ($UserAgent != &quot;&quot;) {
        curl_setopt($curl, CURLOPT_USERAGENT, $UserAgent);
    }
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    $response = curl_exec($curl);
    curl_close($curl);
    return $response;
}
 
function CurlPost($url, $cookies=&quot;&quot;, $post_data=&quot;&quot;, $headers=array(), $refer=&quot;&quot;, $UserAgent = '')
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);
        curl_setopt($curl, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 );
    curl_setopt($curl, CURLOPT_URL, $url);     
    curl_setopt($curl, CURLOPT_USERAGENT, $UserAgent);
        curl_setopt($curl, CURLOPT_COOKIE, $cookies);
        curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
    if ($refer != '') {
        curl_setopt($curl, CURLOPT_REFERER, $refer);
    }
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);
    $response = curl_exec($curl);
    curl_close($curl);
    return $response;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><h2 id="tvsou-节目指南-xmltv-格式的-php-源码"><a href="#tvsou-节目指南-xmltv-格式的-php-源码" class="header-anchor">#</a> tvsou 节目指南 xmltv 格式的 php 源码</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?php
if(date_default_timezone_get() != &quot;Asia/Shanghai&quot;) date_default_timezone_set(&quot;Asia/Shanghai&quot;);
$fp=&quot;epg_tvs.xml&quot;;//压缩版本的扩展名后加.gz
$id0=100000;//起始节目编号
 
$cid=array(
    array('42688016','湖南都市'),
    array('34d6b6de','湖南经视'),
    );
 
function compress_html($string) {
    $string = str_replace(&quot;\r&quot;, '', $string); //清除换行符
    $string = str_replace(&quot;\n&quot;, '', $string); //清除换行符
    $string = str_replace(&quot;\t&quot;, '', $string); //清除制表符
    return $string;
}
 
$dt1=date('Ymd');
$dt2=date('Ymd',time()+24*3600);
$w1=date(&quot;w&quot;);
if ($w1&lt;'1') {$w1=7;}
$w2=$w1+1;
$url0=&quot;https://www.tvsou.com/epg/&quot;;
$chn=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&lt;!DOCTYPE tv SYSTEM \&quot;http://api.torrent-tv.ru/xmltv.dtd\&quot;&gt;\n&lt;tv generator-info-name=\&quot;tvsou\&quot; generator-info-url=\&quot;www.tvsou.com/epg\&quot;&gt;\n&quot;;
 
$nid=sizeof($cid);
 
for ($id = 1; $id &lt;= $nid; $id++){
    $t0=array();
    $t1=array();
    $nm=array();
 
    $url=$url0.$cid[$id-1][0].'/w'.$w1;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    $re = curl_exec($ch);
    curl_close($ch);
    $re=compress_html($re);
    preg_match('|&lt;table class=&quot;layui-table c_table&quot;(.*?)layui-tab-item|i',$re,$u);
    preg_match_all('|&lt;tr&gt;([\s\S]+?)&lt;\/tr&gt;|', trim($u[1]), $u);
    $u=$u[1];
    $num=sizeof($u);
    for ($i = 0; $i &lt; $num; $i++) {
        preg_match_all('|_blank\'&gt;(.*?)&lt;\/a&gt;|',$u[$i],$tr);
        $t0[]=$dt1.str_replace(':','',$tr[1][0]).'00 +0800';
        $nm[]=$tr[1][1];
    }
    $url=$url0.$cid[$id-1][0].'/w'.$w2;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    $re = curl_exec($ch);
    curl_close($ch);
    $re=compress_html($re);
    preg_match('|&lt;table class=&quot;layui-table c_table&quot;(.*?)layui-tab-item|i',$re,$u);
    preg_match_all('|&lt;tr&gt;([\s\S]+?)&lt;\/tr&gt;|', trim($u[1]), $u);
    $u=$u[1];
    $num=sizeof($u);
    for ($i = 0; $i &lt; $num; $i++) {
        preg_match_all('|_blank\'&gt;(.*?)&lt;\/a&gt;|',$u[$i],$tr);
        $t0[]=$dt2.str_replace(':','',$tr[1][0]).'00 +0800';
        $nm[]=$tr[1][1];
    }               
 
    $num=sizeof($t0);
    for ($i = 1; $i &lt; $num; $i++) {$t1[]=$t0[$i];}
    $t1[]=$dt2.'235959 +0800';
    $idd=$id0+$id;
    $chn.=&quot;&lt;channel id=\&quot;&quot;.$idd.&quot;\&quot;&gt;&lt;display-name lang=\&quot;zh\&quot;&gt;&quot;.$cid[$id-1][1].&quot;&lt;/display-name&gt;&lt;/channel&gt;\n&quot;;
    for ($i = 0; $i &lt; $num; $i++) {
        $chn.=&quot;&lt;programme start=\&quot;&quot;.$t0[$i].&quot;\&quot; stop=\&quot;&quot;.$t1[$i].&quot;\&quot; channel=\&quot;&quot;.$idd.&quot;\&quot;&gt;\n&lt;title lang=\&quot;zh\&quot;&gt;&quot;.$nm[$i].&quot;&lt;/title&gt;\n&lt;desc lang=\&quot;zh\&quot;&gt; &lt;/desc&gt;\n&lt;/programme&gt;\n&quot;;
    }
}
$chn.=&quot;&lt;/tv&gt;\n&quot;;
 
//写入文件。这里一次性写入，可以自己分次写入操作
file_put_contents($fp, $chn);
 
//创建压缩版本
$fn = gzopen ($fp.'.gz', 'w9');
gzwrite($fn, file_get_contents($fp));
gzclose($fn);
 
?&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/jiexi.html" class="prev">各类解析封装</a></span> <span class="next"><a href="/guide/css.html">CSS 语法相关</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7786b0ad.js" defer></script><script src="/assets/js/9.265af838.js" defer></script><script src="/assets/js/10.e3e2f078.js" defer></script><script src="/assets/js/50.2309846e.js" defer></script><script src="/assets/js/21.691822bf.js" defer></script>
  </body>
</html>
