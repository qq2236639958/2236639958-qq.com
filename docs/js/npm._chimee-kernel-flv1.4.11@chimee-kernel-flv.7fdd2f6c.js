(window.webpackJsonp=window.webpackJsonp||[]).push([["npm._chimee-kernel-flv1.4.11@chimee-kernel-flv"],{"0bdb":function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){!function(e){"use strict";function t(e){return e&&e.__esModule?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r=Math.ceil,i=Math.floor,o=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)},a=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},s=n((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),u=n((function(e){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)})),f=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},c=function(e){return"object"==typeof e?null!==e:"function"==typeof e},l=function(e){if(!c(e))throw TypeError(e+" is not an object!");return e},d=function(e){try{return!!e()}catch(e){return!0}},h=!d((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),p=s.document,v=c(p)&&c(p.createElement),m=function(e){return v?p.createElement(e):{}},y=!h&&!d((function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a})),g=function(e,t){if(!c(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!c(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!c(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!c(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,_={f:h?Object.defineProperty:function(e,t,n){if(l(e),t=g(t,!0),l(n),y)try{return b(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},w=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},S=h?function(e,t,n){return _.f(e,t,w(1,n))}:function(e,t,n){return e[t]=n,e},k=function(e,t,n){var r,i,o,a=e&k.F,c=e&k.G,l=e&k.S,d=e&k.P,h=e&k.B,p=e&k.W,v=c?u:u[t]||(u[t]={}),m=v.prototype,y=c?s:l?s[t]:(s[t]||{}).prototype;for(r in c&&(n=t),n)(i=!a&&y&&void 0!==y[r])&&r in v||(o=i?y[r]:n[r],v[r]=c&&"function"!=typeof y[r]?n[r]:h&&i?f(o,s):p&&y[r]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(o):d&&"function"==typeof o?f(Function.call,o):o,d&&((v.virtual||(v.virtual={}))[r]=o,e&k.R&&m&&!m[r]&&S(m,r,o)))};k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var E,O=k,T=S,A={}.hasOwnProperty,x=function(e,t){return A.call(e,t)},R={},M={}.toString,D=function(e){return M.call(e).slice(8,-1)},L=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==D(e)?e.split(""):Object(e)},P=function(e){return L(a(e))},B=Math.min,C=Math.max,I=Math.min,j=s["__core-js_shared__"]||(s["__core-js_shared__"]={}),N=function(e){return j[e]||(j[e]={})},F=0,U=Math.random(),V=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++F+U).toString(36))},z=N("keys"),G=function(e){return z[e]||(z[e]=V(e))},W=(E=!1,function(e,t,n){var r,i,a=P(e),s=(i=a.length)>0?B(o(i),9007199254740991):0,u=function(e,t){return(e=o(e))<0?C(e+t,0):I(e,t)}(n,s);if(E&&t!=t){for(;s>u;)if((r=a[u++])!=r)return!0}else for(;s>u;u++)if((E||u in a)&&a[u]===t)return E||u||0;return!E&&-1}),q=G("IE_PROTO"),H=function(e,t){var n,r=P(e),i=0,o=[];for(n in r)n!=q&&x(r,n)&&o.push(n);for(;t.length>i;)x(r,n=t[i++])&&(~W(o,n)||o.push(n));return o},K="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Y=Object.keys||function(e){return H(e,K)},J=h?Object.defineProperties:function(e,t){l(e);for(var n,r=Y(t),i=r.length,o=0;i>o;)_.f(e,n=r[o++],t[n]);return e},X=s.document&&document.documentElement,$=G("IE_PROTO"),Q=function(){},Z=function(){var e,t=m("iframe"),n=K.length;for(t.style.display="none",X.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Z=e.F;n--;)delete Z.prototype[K[n]];return Z()},ee=Object.create||function(e,t){var n;return null!==e?(Q.prototype=l(e),n=new Q,Q.prototype=null,n[$]=e):n=Z(),void 0===t?n:J(n,t)},te=n((function(e){var t=N("wks"),n=s.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:V)("Symbol."+e))}).store=t})),ne=_.f,re=te("toStringTag"),ie=function(e,t,n){e&&!x(e=n?e:e.prototype,re)&&ne(e,re,{configurable:!0,value:t})},oe={};S(oe,te("iterator"),(function(){return this}));var ae,se=function(e,t,n){e.prototype=ee(oe,{next:w(1,n)}),ie(e,t+" Iterator")},ue=function(e){return Object(a(e))},fe=G("IE_PROTO"),ce=Object.prototype,le=Object.getPrototypeOf||function(e){return e=ue(e),x(e,fe)?e[fe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ce:null},de=te("iterator"),he=!([].keys&&"next"in[].keys()),pe=function(){return this},ve=function(e,t,n,r,i,o,a){se(n,t,r);var s,u,f,c=function(e){if(!he&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},l=t+" Iterator",d="values"==i,h=!1,p=e.prototype,v=p[de]||p["@@iterator"]||i&&p[i],m=v||c(i),y=i?d?c("entries"):m:void 0,g="Array"==t&&p.entries||v;if(g&&(f=le(g.call(new e)))!==Object.prototype&&ie(f,l,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(he||h||!p[de])&&S(p,de,m),R[t]=m,R[l]=pe,i)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:y},a)for(u in s)u in p||T(p,u,s[u]);else O(O.P+O.F*(he||h),t,s);return s},me=(ae=!0,function(e,t){var n,r,i=String(a(e)),s=o(t),u=i.length;return s<0||s>=u?ae?"":void 0:(n=i.charCodeAt(s))<55296||n>56319||s+1===u||(r=i.charCodeAt(s+1))<56320||r>57343?ae?i.charAt(s):n:ae?i.slice(s,s+2):r-56320+(n-55296<<10)+65536});ve(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=me(t,n),this._i+=e.length,{value:e,done:!1})}));var ye=function(e,t){return{value:t,done:!!e}};ve(Array,"Array",(function(e,t){this._t=P(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,ye(1)):ye(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),R.Arguments=R.Array;for(var ge=te("toStringTag"),be=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],_e=0;_e<5;_e++){var we=be[_e],Se=s[we],ke=Se&&Se.prototype;ke&&!ke[ge]&&S(ke,ge,we),R[we]=R.Array}var Ee={f:te},Oe=Ee.f("iterator"),Te=n((function(e){e.exports={default:Oe,__esModule:!0}})),Ae=n((function(e){var t=V("meta"),n=_.f,r=0,i=Object.isExtensible||function(){return!0},o=!d((function(){return i(Object.preventExtensions({}))})),a=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!c(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!x(e,t)){if(!i(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!x(e,t)){if(!i(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&i(e)&&!x(e,t)&&a(e),e}}})),xe=_.f,Re=function(e){var t=u.Symbol||(u.Symbol={});"_"==e.charAt(0)||e in t||xe(t,e,{value:Ee.f(e)})},Me={f:Object.getOwnPropertySymbols},De={f:{}.propertyIsEnumerable},Le=Array.isArray||function(e){return"Array"==D(e)},Pe=K.concat("length","prototype"),Be={f:Object.getOwnPropertyNames||function(e){return H(e,Pe)}},Ce=Be.f,Ie={}.toString,je="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ne={f:function(e){return je&&"[object Window]"==Ie.call(e)?function(e){try{return Ce(e)}catch(e){return je.slice()}}(e):Ce(P(e))}},Fe=Object.getOwnPropertyDescriptor,Ue={f:h?Fe:function(e,t){if(e=P(e),t=g(t,!0),y)try{return Fe(e,t)}catch(e){}if(x(e,t))return w(!De.f.call(e,t),e[t])}},Ve=Ae.KEY,ze=Ue.f,Ge=_.f,We=Ne.f,qe=s.Symbol,He=s.JSON,Ke=He&&He.stringify,Ye=te("_hidden"),Je=te("toPrimitive"),Xe={}.propertyIsEnumerable,$e=N("symbol-registry"),Qe=N("symbols"),Ze=N("op-symbols"),et=Object.prototype,tt="function"==typeof qe,nt=s.QObject,rt=!nt||!nt.prototype||!nt.prototype.findChild,it=h&&d((function(){return 7!=ee(Ge({},"a",{get:function(){return Ge(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=ze(et,t);r&&delete et[t],Ge(e,t,n),r&&e!==et&&Ge(et,t,r)}:Ge,ot=function(e){var t=Qe[e]=ee(qe.prototype);return t._k=e,t},at=tt&&"symbol"==typeof qe.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof qe},st=function(e,t,n){return e===et&&st(Ze,t,n),l(e),t=g(t,!0),l(n),x(Qe,t)?(n.enumerable?(x(e,Ye)&&e[Ye][t]&&(e[Ye][t]=!1),n=ee(n,{enumerable:w(0,!1)})):(x(e,Ye)||Ge(e,Ye,w(1,{})),e[Ye][t]=!0),it(e,t,n)):Ge(e,t,n)},ut=function(e,t){l(e);for(var n,r=function(e){var t=Y(e),n=Me.f;if(n)for(var r,i=n(e),o=De.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}(t=P(t)),i=0,o=r.length;o>i;)st(e,n=r[i++],t[n]);return e},ft=function(e){var t=Xe.call(this,e=g(e,!0));return!(this===et&&x(Qe,e)&&!x(Ze,e))&&(!(t||!x(this,e)||!x(Qe,e)||x(this,Ye)&&this[Ye][e])||t)},ct=function(e,t){if(e=P(e),t=g(t,!0),e!==et||!x(Qe,t)||x(Ze,t)){var n=ze(e,t);return!n||!x(Qe,t)||x(e,Ye)&&e[Ye][t]||(n.enumerable=!0),n}},lt=function(e){for(var t,n=We(P(e)),r=[],i=0;n.length>i;)x(Qe,t=n[i++])||t==Ye||t==Ve||r.push(t);return r},dt=function(e){for(var t,n=e===et,r=We(n?Ze:P(e)),i=[],o=0;r.length>o;)!x(Qe,t=r[o++])||n&&!x(et,t)||i.push(Qe[t]);return i};tt||(T((qe=function(){if(this instanceof qe)throw TypeError("Symbol is not a constructor!");var e=V(arguments.length>0?arguments[0]:void 0),t=function(n){this===et&&t.call(Ze,n),x(this,Ye)&&x(this[Ye],e)&&(this[Ye][e]=!1),it(this,e,w(1,n))};return h&&rt&&it(et,e,{configurable:!0,set:t}),ot(e)}).prototype,"toString",(function(){return this._k})),Ue.f=ct,_.f=st,Be.f=Ne.f=lt,De.f=ft,Me.f=dt,Ee.f=function(e){return ot(te(e))}),O(O.G+O.W+O.F*!tt,{Symbol:qe});for(var ht="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),pt=0;ht.length>pt;)te(ht[pt++]);for(ht=Y(te.store),pt=0;ht.length>pt;)Re(ht[pt++]);O(O.S+O.F*!tt,"Symbol",{for:function(e){return x($e,e+="")?$e[e]:$e[e]=qe(e)},keyFor:function(e){if(at(e))return function(e,t){for(var n,r=P(e),i=Y(r),o=i.length,a=0;o>a;)if(r[n=i[a++]]===t)return n}($e,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),O(O.S+O.F*!tt,"Object",{create:function(e,t){return void 0===t?ee(e):ut(ee(e),t)},defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:ct,getOwnPropertyNames:lt,getOwnPropertySymbols:dt}),He&&O(O.S+O.F*(!tt||d((function(){var e=qe();return"[null]"!=Ke([e])||"{}"!=Ke({a:e})||"{}"!=Ke(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!at(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(t=r[1])&&(n=t),!n&&Le(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!at(t))return t}),r[1]=t,Ke.apply(He,r)}}}),qe.prototype[Je]||S(qe.prototype,Je,qe.prototype.valueOf),ie(qe,"Symbol"),ie(Math,"Math",!0),ie(s.JSON,"JSON",!0),Re("asyncIterator"),Re("observable");var vt=u.Symbol,mt=n((function(e){e.exports={default:vt,__esModule:!0}})),yt=t(n((function(e,t){t.__esModule=!0;var n=o(Te),r=o(mt),i="function"==typeof r.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===i(n.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":i(e)}}))),gt=t(n((function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})));O(O.S+O.F*!h,"Object",{defineProperty:_.f});var bt=u.Object,_t=function(e,t,n){return bt.defineProperty(e,t,n)},wt=n((function(e){e.exports={default:_t,__esModule:!0}})),St=t(n((function(e,t){t.__esModule=!0;var n,r=(n=wt)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()}))),kt=Object.assign,Et=!kt||d((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=kt({},e)[n]||Object.keys(kt({},t)).join("")!=r}))?function(e,t){for(var n=ue(e),r=arguments.length,i=1,o=Me.f,a=De.f;r>i;)for(var s,u=L(arguments[i++]),f=o?Y(u).concat(o(u)):Y(u),c=f.length,l=0;c>l;)a.call(u,s=f[l++])&&(n[s]=u[s]);return n}:kt;O(O.S+O.F,"Object",{assign:Et});var Ot=u.Object.assign,Tt=t(n((function(e){e.exports={default:Ot,__esModule:!0}})));O(O.S,"Object",{create:ee});var At,xt,Rt,Mt,Dt=u.Object,Lt=function(e,t){return Dt.create(e,t)},Pt=t(n((function(e){e.exports={default:Lt,__esModule:!0}})));At="keys",xt=function(){return function(e){return Y(ue(e))}},Rt=(u.Object||{})[At]||Object[At],(Mt={})[At]=xt(Rt),O(O.S+O.F*d((function(){Rt(1)})),"Object",Mt);var Bt=u.Object.keys,Ct=(n((function(e){e.exports={default:Bt,__esModule:!0}})),Math.floor);O(O.S,"Number",{isInteger:function(e){return!c(e)&&isFinite(e)&&Ct(e)===e}});var It=u.Number.isInteger,jt=(n((function(e){e.exports={default:It,__esModule:!0}})),"\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"),Nt="["+jt+"]",Ft=RegExp("^"+Nt+Nt+"*"),Ut=RegExp(Nt+Nt+"*$"),Vt=function(e,t,n){var r={},i=d((function(){return!!jt[e]()||"​"!="​"[e]()})),o=r[e]=i?t(zt):jt[e];n&&(r[n]=o),O(O.P+O.F*i,"String",r)},zt=Vt.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(Ft,"")),2&t&&(e=e.replace(Ut,"")),e},Gt=Vt,Wt=s.parseFloat,qt=Gt.trim,Ht=1/Wt(jt+"-0")!=-1/0?function(e){var t=qt(String(e),3),n=Wt(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Wt;O(O.S+O.F*(Number.parseFloat!=Ht),"Number",{parseFloat:Ht});var Kt=parseFloat;function Yt(e){return"function"==typeof e}function Jt(e){return Object(e)===e&&"[object Object]"===String(e)&&!Yt(e)&&(t=e,!Array.isArray(t));var t}n((function(e){e.exports={default:Kt,__esModule:!0}}));var Xt=Pt(null);function $t(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Xt.count);var r=n+"_"+t,i=Xt[r];return i||(i=Xt[r]=[]),i}function Qt(e,t,n){var r=Pt(null);r.type=t,r.target=e,n&&Tt(r,Jt(n)?n:{data:n}),$t(e,t).forEach((function(t){(t[1]||t[0]).apply(e,[r])}))}function Zt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments[4];Yt(r)&&!i&&(i=r,r=void 0);var o=[n,void 0,r];r&&!i&&(i=function(){en(e,t,n,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];n.apply(e,o)}),i&&(o[1]=i),$t(e,t).push(o)}function en(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=$t(e,t);if(n||r){var o=-1,a=void 0;return i.find((function(e,t){if((!n||e[0]===n)&&(!r||e[2]))return o=t,a=e[1],!0})),-1!==o&&i.splice(o,1),a}i.length=0}Xt.count=0;var tn=function(){function e(t,n){var r=this;if(gt(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==(void 0===t?"undefined":yt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach((function(e){t[e]=r[e]}))}}return St(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Zt(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return en(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return Qt(this.__target,e,{data:t}),this}}]),e}();e.emitEventCache=Qt,e.addEventCache=Zt,e.removeEventCache=en,e.CustEvent=tn,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORNO={NET_ERROR:100,CODEC_ERROR:101,CANNOT_SEEK:102,ENDOFSTREAM_ERROR:103,MEDIASOURCE_ERROR:104,SOURCEBUFFER_ERROR:105,SBABORT_ERROR:106,APPENDBUFFER_ERROR:107}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYER_EVENTS={LOADER_OPEN:"loader-open",LOADER_CHUNK_ARRIVAL:"loader-chunk-arrival",MEDIA_DEMUX_FLV:"media-demux-flv",MEDIA_SEGMENT_INIT:"media-segment-init",MEDIA_INFO:"media-info",MEDIA_SEGMENT:"media-segment",PLAYING:"playing",CANPLAY:"canplay",TIMEUPDATE:"timeupdate"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t}},function(e,t,n){e.exports=function(){"use strict";function e(e){return e&&e.__esModule?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=e(t((function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}))),r=t((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),i=t((function(e){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)})),o=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},a=function(e){return"object"==typeof e?null!==e:"function"==typeof e},s=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e},u=function(e){try{return!!e()}catch(e){return!0}},f=!u((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),c=r.document,l=a(c)&&a(c.createElement),d=function(e){return l?c.createElement(e):{}},h=!f&&!u((function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a})),p=function(e,t){if(!a(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},v=Object.defineProperty,m={f:f?Object.defineProperty:function(e,t,n){if(s(e),t=p(t,!0),s(n),h)try{return v(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},g=f?function(e,t,n){return m.f(e,t,y(1,n))}:function(e,t,n){return e[t]=n,e},b=function(e,t,n){var a,s,u,f=e&b.F,c=e&b.G,l=e&b.S,d=e&b.P,h=e&b.B,p=e&b.W,v=c?i:i[t]||(i[t]={}),m=v.prototype,y=c?r:l?r[t]:(r[t]||{}).prototype;for(a in c&&(n=t),n)(s=!f&&y&&void 0!==y[a])&&a in v||(u=s?y[a]:n[a],v[a]=c&&"function"!=typeof y[a]?n[a]:h&&s?o(u,r):p&&y[a]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):d&&"function"==typeof u?o(Function.call,u):u,d&&((v.virtual||(v.virtual={}))[a]=u,e&b.R&&m&&!m[a]&&g(m,a,u)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var _=b;_(_.S+_.F*!f,"Object",{defineProperty:m.f});var w,S=i.Object,k=function(e,t,n){return S.defineProperty(e,t,n)},E=t((function(e){e.exports={default:k,__esModule:!0}})),O=e(t((function(e,t){t.__esModule=!0;var n,r=(n=E)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()}))),T=Math.ceil,A=Math.floor,x=function(e){return isNaN(e=+e)?0:(e>0?A:T)(e)},R=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},M=g,D={}.hasOwnProperty,L=function(e,t){return D.call(e,t)},P={},B={}.toString,C=function(e){return B.call(e).slice(8,-1)},I=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==C(e)?e.split(""):Object(e)},j=function(e){return I(R(e))},N=Math.min,F=Math.max,U=Math.min,V=r["__core-js_shared__"]||(r["__core-js_shared__"]={}),z=function(e){return V[e]||(V[e]={})},G=0,W=Math.random(),q=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++G+W).toString(36))},H=z("keys"),K=function(e){return H[e]||(H[e]=q(e))},Y=(w=!1,function(e,t,n){var r,i,o=j(e),a=(i=o.length)>0?N(x(i),9007199254740991):0,s=function(e,t){return(e=x(e))<0?F(e+t,0):U(e,t)}(n,a);if(w&&t!=t){for(;a>s;)if((r=o[s++])!=r)return!0}else for(;a>s;s++)if((w||s in o)&&o[s]===t)return w||s||0;return!w&&-1}),J=K("IE_PROTO"),X=function(e,t){var n,r=j(e),i=0,o=[];for(n in r)n!=J&&L(r,n)&&o.push(n);for(;t.length>i;)L(r,n=t[i++])&&(~Y(o,n)||o.push(n));return o},$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(e){return X(e,$)},Z=f?Object.defineProperties:function(e,t){s(e);for(var n,r=Q(t),i=r.length,o=0;i>o;)m.f(e,n=r[o++],t[n]);return e},ee=r.document&&document.documentElement,te=K("IE_PROTO"),ne=function(){},re=function(){var e,t=d("iframe"),n=$.length;for(t.style.display="none",ee.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),re=e.F;n--;)delete re.prototype[$[n]];return re()},ie=Object.create||function(e,t){var n;return null!==e?(ne.prototype=s(e),n=new ne,ne.prototype=null,n[te]=e):n=re(),void 0===t?n:Z(n,t)},oe=t((function(e){var t=z("wks"),n=r.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:q)("Symbol."+e))}).store=t})),ae=m.f,se=oe("toStringTag"),ue=function(e,t,n){e&&!L(e=n?e:e.prototype,se)&&ae(e,se,{configurable:!0,value:t})},fe={};g(fe,oe("iterator"),(function(){return this}));var ce,le=function(e,t,n){e.prototype=ie(fe,{next:y(1,n)}),ue(e,t+" Iterator")},de=function(e){return Object(R(e))},he=K("IE_PROTO"),pe=Object.prototype,ve=Object.getPrototypeOf||function(e){return e=de(e),L(e,he)?e[he]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?pe:null},me=oe("iterator"),ye=!([].keys&&"next"in[].keys()),ge=function(){return this},be=function(e,t,n,r,i,o,a){le(n,t,r);var s,u,f,c=function(e){if(!ye&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},l=t+" Iterator",d="values"==i,h=!1,p=e.prototype,v=p[me]||p["@@iterator"]||i&&p[i],m=v||c(i),y=i?d?c("entries"):m:void 0,b="Array"==t&&p.entries||v;if(b&&(f=ve(b.call(new e)))!==Object.prototype&&ue(f,l,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(ye||h||!p[me])&&g(p,me,m),P[t]=m,P[l]=ge,i)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:y},a)for(u in s)u in p||M(p,u,s[u]);else _(_.P+_.F*(ye||h),t,s);return s},_e=(ce=!0,function(e,t){var n,r,i=String(R(e)),o=x(t),a=i.length;return o<0||o>=a?ce?"":void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===a||(r=i.charCodeAt(o+1))<56320||r>57343?ce?i.charAt(o):n:ce?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});be(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=_e(t,n),this._i+=e.length,{value:e,done:!1})}));var we=function(e,t){return{value:t,done:!!e}};be(Array,"Array",(function(e,t){this._t=j(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,we(1)):we(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),P.Arguments=P.Array;for(var Se=oe("toStringTag"),ke=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],Ee=0;Ee<5;Ee++){var Oe=ke[Ee],Te=r[Oe],Ae=Te&&Te.prototype;Ae&&!Ae[Se]&&g(Ae,Se,Oe),P[Oe]=P.Array}var xe={f:oe},Re=xe.f("iterator"),Me=t((function(e){e.exports={default:Re,__esModule:!0}})),De=t((function(e){var t=q("meta"),n=m.f,r=0,i=Object.isExtensible||function(){return!0},o=!u((function(){return i(Object.preventExtensions({}))})),s=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},f=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!L(e,t)){if(!i(e))return"F";if(!n)return"E";s(e)}return e[t].i},getWeak:function(e,n){if(!L(e,t)){if(!i(e))return!0;if(!n)return!1;s(e)}return e[t].w},onFreeze:function(e){return o&&f.NEED&&i(e)&&!L(e,t)&&s(e),e}}})),Le=m.f,Pe=function(e){var t=i.Symbol||(i.Symbol={});"_"==e.charAt(0)||e in t||Le(t,e,{value:xe.f(e)})},Be={f:Object.getOwnPropertySymbols},Ce={f:{}.propertyIsEnumerable},Ie=Array.isArray||function(e){return"Array"==C(e)},je=$.concat("length","prototype"),Ne={f:Object.getOwnPropertyNames||function(e){return X(e,je)}},Fe=Ne.f,Ue={}.toString,Ve="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ze={f:function(e){return Ve&&"[object Window]"==Ue.call(e)?function(e){try{return Fe(e)}catch(e){return Ve.slice()}}(e):Fe(j(e))}},Ge=Object.getOwnPropertyDescriptor,We={f:f?Ge:function(e,t){if(e=j(e),t=p(t,!0),h)try{return Ge(e,t)}catch(e){}if(L(e,t))return y(!Ce.f.call(e,t),e[t])}},qe=De.KEY,He=We.f,Ke=m.f,Ye=ze.f,Je=r.Symbol,Xe=r.JSON,$e=Xe&&Xe.stringify,Qe=oe("_hidden"),Ze=oe("toPrimitive"),et={}.propertyIsEnumerable,tt=z("symbol-registry"),nt=z("symbols"),rt=z("op-symbols"),it=Object.prototype,ot="function"==typeof Je,at=r.QObject,st=!at||!at.prototype||!at.prototype.findChild,ut=f&&u((function(){return 7!=ie(Ke({},"a",{get:function(){return Ke(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=He(it,t);r&&delete it[t],Ke(e,t,n),r&&e!==it&&Ke(it,t,r)}:Ke,ft=function(e){var t=nt[e]=ie(Je.prototype);return t._k=e,t},ct=ot&&"symbol"==typeof Je.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Je},lt=function(e,t,n){return e===it&&lt(rt,t,n),s(e),t=p(t,!0),s(n),L(nt,t)?(n.enumerable?(L(e,Qe)&&e[Qe][t]&&(e[Qe][t]=!1),n=ie(n,{enumerable:y(0,!1)})):(L(e,Qe)||Ke(e,Qe,y(1,{})),e[Qe][t]=!0),ut(e,t,n)):Ke(e,t,n)},dt=function(e,t){s(e);for(var n,r=function(e){var t=Q(e),n=Be.f;if(n)for(var r,i=n(e),o=Ce.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}(t=j(t)),i=0,o=r.length;o>i;)lt(e,n=r[i++],t[n]);return e},ht=function(e){var t=et.call(this,e=p(e,!0));return!(this===it&&L(nt,e)&&!L(rt,e))&&(!(t||!L(this,e)||!L(nt,e)||L(this,Qe)&&this[Qe][e])||t)},pt=function(e,t){if(e=j(e),t=p(t,!0),e!==it||!L(nt,t)||L(rt,t)){var n=He(e,t);return!n||!L(nt,t)||L(e,Qe)&&e[Qe][t]||(n.enumerable=!0),n}},vt=function(e){for(var t,n=Ye(j(e)),r=[],i=0;n.length>i;)L(nt,t=n[i++])||t==Qe||t==qe||r.push(t);return r},mt=function(e){for(var t,n=e===it,r=Ye(n?rt:j(e)),i=[],o=0;r.length>o;)!L(nt,t=r[o++])||n&&!L(it,t)||i.push(nt[t]);return i};ot||(M((Je=function(){if(this instanceof Je)throw TypeError("Symbol is not a constructor!");var e=q(arguments.length>0?arguments[0]:void 0),t=function(n){this===it&&t.call(rt,n),L(this,Qe)&&L(this[Qe],e)&&(this[Qe][e]=!1),ut(this,e,y(1,n))};return f&&st&&ut(it,e,{configurable:!0,set:t}),ft(e)}).prototype,"toString",(function(){return this._k})),We.f=pt,m.f=lt,Ne.f=ze.f=vt,Ce.f=ht,Be.f=mt,xe.f=function(e){return ft(oe(e))}),_(_.G+_.W+_.F*!ot,{Symbol:Je});for(var yt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),gt=0;yt.length>gt;)oe(yt[gt++]);for(yt=Q(oe.store),gt=0;yt.length>gt;)Pe(yt[gt++]);_(_.S+_.F*!ot,"Symbol",{for:function(e){return L(tt,e+="")?tt[e]:tt[e]=Je(e)},keyFor:function(e){if(ct(e))return function(e,t){for(var n,r=j(e),i=Q(r),o=i.length,a=0;o>a;)if(r[n=i[a++]]===t)return n}(tt,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){st=!0},useSimple:function(){st=!1}}),_(_.S+_.F*!ot,"Object",{create:function(e,t){return void 0===t?ie(e):dt(ie(e),t)},defineProperty:lt,defineProperties:dt,getOwnPropertyDescriptor:pt,getOwnPropertyNames:vt,getOwnPropertySymbols:mt}),Xe&&_(_.S+_.F*(!ot||u((function(){var e=Je();return"[null]"!=$e([e])||"{}"!=$e({a:e})||"{}"!=$e(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!ct(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(t=r[1])&&(n=t),!n&&Ie(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!ct(t))return t}),r[1]=t,$e.apply(Xe,r)}}}),Je.prototype[Ze]||g(Je.prototype,Ze,Je.prototype.valueOf),ue(Je,"Symbol"),ue(Math,"Math",!0),ue(r.JSON,"JSON",!0),Pe("asyncIterator"),Pe("observable");var bt,_t,wt,St,kt=i.Symbol,Et=t((function(e){e.exports={default:kt,__esModule:!0}})),Ot=e(t((function(e,t){t.__esModule=!0;var n=o(Me),r=o(Et),i="function"==typeof r.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===i(n.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":i(e)}})));bt="keys",_t=function(){return function(e){return Q(de(e))}},wt=(i.Object||{})[bt]||Object[bt],(St={})[bt]=_t(wt),_(_.S+_.F*u((function(){wt(1)})),"Object",St);var Tt=i.Object.keys,At=(t((function(e){e.exports={default:Tt,__esModule:!0}})),Math.floor);_(_.S,"Number",{isInteger:function(e){return!a(e)&&isFinite(e)&&At(e)===e}});var xt=i.Number.isInteger,Rt=(t((function(e){e.exports={default:xt,__esModule:!0}})),"\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"),Mt="["+Rt+"]",Dt=RegExp("^"+Mt+Mt+"*"),Lt=RegExp(Mt+Mt+"*$"),Pt=function(e,t,n){var r={},i=u((function(){return!!Rt[e]()||"​"!="​"[e]()})),o=r[e]=i?t(Bt):Rt[e];n&&(r[n]=o),_(_.P+_.F*i,"String",r)},Bt=Pt.trim=function(e,t){return e=String(R(e)),1&t&&(e=e.replace(Dt,"")),2&t&&(e=e.replace(Lt,"")),e},Ct=Pt,It=r.parseFloat,jt=Ct.trim,Nt=1/It(Rt+"-0")!=-1/0?function(e){var t=jt(String(e),3),n=It(t);return 0===n&&"-"==t.charAt(0)?-0:n}:It;_(_.S+_.F*(Number.parseFloat!=Nt),"Number",{parseFloat:Nt});var Ft=parseFloat;function Ut(e){return"string"==typeof e||e instanceof String}function Vt(e,t){if(!Ut(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+(void 0===e?"undefined":Ot(e)));return Ut(t)?"["+(e=zt.FORCE_GLOBAL_TAG?zt.GLOBAL_TAG:e||zt.GLOBAL_TAG)+"] > "+t:"["+zt.GLOBAL_TAG+"] > "+e}t((function(e){e.exports={default:Ft,__esModule:!0}}));var zt=function(){function e(){n(this,e)}return O(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,Vt(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,Vt(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,Vt(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,Vt(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(Vt(t,n))}}]),e}();return zt.GLOBAL_TAG="chimee",zt.FORCE_GLOBAL_TAG=!1,zt.ENABLE_ERROR=!0,zt.ENABLE_INFO=!0,zt.ENABLE_WARN=!0,zt.ENABLE_DEBUG=!0,zt.ENABLE_VERBOSE=!0,zt}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(16)),o=c(n(18)),a=c(n(19)),s=c(n(20)),u=n(0),f=n(2);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.loader=null,n.config={},n.config=e||{},n.bufferSize=3145728,n.cacheBuffer=new ArrayBuffer(n.bufferSize),n.cacheRemain=0,n.stashByteStart=0,n.enableStash=!0,n.stashSize=n.config.stashSize||393216,n.resumeFrom=0,n.currentRange={},n.totalReceive=0,n.seekPonit=void 0,n.timer=null,n.heartBeatInterval=null,n.preTotalReceive=0,n.seekLock=!1,n.webSocketURLReg=/wss?:\/\/(.+?)/,n.selectLoader(),n.bindEvent(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"selectLoader",value:function(){var e=this.config,t=this.config.src;this.webSocketURLReg.test(t)?this.loader=new a.default(t,e,this.queryHandle):i.default.isSupport()?this.loader=new i.default(t,e,this.queryHandle):s.default.isSupport()?this.loader=new s.default(t,e,this.queryHandle):o.default.isSupport()&&(this.loader=new o.default(t,e,this.queryHandle)),this.loader.arrivalDataCallback=this.onLoaderChunkArrival.bind(this)}},{key:"bindEvent",value:function(){var e=this;this.loader.on("end",(function(){var t=e.cacheBuffer.slice(0,e.cacheRemain);e.arrivalDataCallback(t,e.stashByteStart),e.emit("end")})),["error","performance"].forEach((function(t){e.loader.on(t,(function(n){e.emit(t,n.data)}))}))}},{key:"unbindEvent",value:function(){this.loader.off("end"),this.loader.off("error"),this.loader.off("performance")}},{key:"onLoaderChunkArrival",value:function(e,t,n){if(void 0===this.startReceiveTime&&(this.startReceiveTime=Date.now()),(!this.seekLock||void 0!==n)&&(void 0!==n&&(this.seekPonit=n,this.seekLock=!1),this.arrivalDataCallback))if(this.emit("player-event",{type:f.PLAYER_EVENTS.LOADER_CHUNK_ARRIVAL,byteLength:e.byteLength,ts:Date.now()}),this.totalReceive+=e.byteLength,0===this.cacheRemain&&0===this.stashByteStart&&(this.stashByteStart=t),this.cacheRemain+e.byteLength<=this.stashSize)new Uint8Array(this.cacheBuffer,0,this.stashSize).set(new Uint8Array(e),this.cacheRemain),this.cacheRemain+=e.byteLength;else{this.startReceiveTime&&(this.emit("performance",{type:"first-flv-package-duration",value:Date.now()-this.startReceiveTime}),this.startReceiveTime=void 0);var r=new Uint8Array(this.cacheBuffer,0,this.bufferSize);if(this.cacheRemain>0){var i=this.cacheBuffer.slice(0,this.cacheRemain),o=0,a=Date.now();if(void 0!==this.seekPonit?(o=this.arrivalDataCallback(i,this.stashByteStart,this.seekPonit),this.seekPonit=void 0):o=this.arrivalDataCallback(i,this.stashByteStart),this.emit("performance",{type:"first-flv-to-mp4",value:Date.now()-a}),o<i.byteLength){if(o>0){var s=new Uint8Array(i,o);r.set(s,0),this.cacheRemain=s.byteLength,this.stashByteStart+=o}}else this.cacheRemain=0,this.stashByteStart+=o;this.cacheRemain+e.byteLength>this.bufferSize&&(this.expandBuffer(this.cacheRemain+e.byteLength),r=new Uint8Array(this.cacheBuffer,0,this.bufferSize)),r.set(new Uint8Array(e),this.cacheRemain),this.cacheRemain+=e.byteLength}else{var u=0,c=Date.now();if(void 0!==this.seekPonit?(u=this.arrivalDataCallback(e,t,this.seekPonit),this.seekPonit=void 0):u=this.arrivalDataCallback(e,t),this.emit("performance",{type:"first-flv-to-mp4",value:Date.now()-c}),u<e.byteLength){var l=e.byteLength-u;l>this.bufferSize&&(this.expandBuffer(l),r=new Uint8Array(this.cacheBuffer,0,this.bufferSize)),r.set(new Uint8Array(e,u),0),this.cacheRemain+=l,this.stashByteStart=t+u}}}}},{key:"initCacheBuffer",value:function(){this.cacheRemain=0,this.totalReceive=0,this.cacheBuffer=new ArrayBuffer(this.bufferSize)}},{key:"expandBuffer",value:function(e){var t=this.bufferSize;t<e&&(t=e),this.cacheBuffer=new ArrayBuffer(t),this.bufferSize=t}},{key:"pause",value:function(){this.loader.pause()}},{key:"open",value:function(e,t){this.emit("player-event",{type:f.PLAYER_EVENTS.LOADER_OPEN,ts:Date.now()}),this.loader.open({from:e||0,to:-1},t),this.heartbeat()}},{key:"heartbeat",value:function(){var e=this;clearInterval(this.heartBeatInterval),this.heartBeatInterval=setInterval((function(){e.emit("heartbeat",{speed:e.totalReceive-e.preTotalReceive,totalReceive:e.totalReceive}),e.preTotalReceive=e.totalReceive}),1e3)}},{key:"resume",value:function(){this.paused=!1;var e=this.totalReceive;this.open(e)}},{key:"seek",value:function(e,t,n){this.seekLock=!0,this.totalReceive=e,this.preTotalReceive=e,this.initCacheBuffer(),this.cacheRemain=0,this.stashByteStart=0,this.open(e,n)}},{key:"destroy",value:function(){this.pause(),this.initCacheBuffer(),window.clearInterval(this.heartBeatInterval),this.heartBeatInterval=null,this.unbindEvent()}}]),t}(u.CustEvent);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n=void 0;return n=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",t.Range=n,{headers:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(22)),o=f(n(8)),a=f(n(10)),s=f(n(28)),u=n(0);function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}f(n(3));var l=function(){function e(t){c(this,e),a.default.init(),this._config=t,this.onInitSegment=null,this.onMediaSegment=null,this.onMediaInfo=null,this.seekCallBack=null,this._onCdnDropFrame=null,this.loadmetadata=!1,this.ftyp_moov=null,this._tagdemux=new o.default,this._flvparse=new i.default,this.ftyp_moov_v=null,this.ftyp_moov_a=null,this.metaSuccRun=!1,this.metas=[],this.parseChunk=null,this.hasVideo=!1,this.hasAudio=!1,this._error=null,this._pendingResolveSeekPoint=-1,this._tempBaseTime=0,this.setflvBase=this.setflvBasefrist,this._tagdemux._onTrackMetadata=this.Metadata.bind(this),this._tagdemux._onMediaInfo=this.metaSucc.bind(this),this._tagdemux._onDataAvailable=this.onDataAvailable.bind(this),this._tagdemux._onError=this.error.bind(this),this._tagdemux._onCdnDropFrame=this.onCdnDropFrame.bind(this),this.m4mof=new s.default(this._config),this.m4mof.onMediaSegment=this.onMdiaSegment.bind(this)}return r(e,[{key:"seek",value:function(e){this._flvparse.dispose(),this.setflvBase=this.setflvBasefrist,null!=e&&0!=e||(e=0,this._pendingResolveSeekPoint=-1),this._tempBaseTime!=e&&(this._tempBaseTime=e,this._tagdemux._timestampBase=e,this.m4mof.seek(e),this.m4mof.insertDiscontinuity(),this._pendingResolveSeekPoint=e)}},{key:"setflvBasefrist",value:function(e,t){var n=0;try{n=this._flvparse.setFlv(new Uint8Array(e))}catch(e){this.error(e)}if(0==this._flvparse.arrTag.length)return n;if(this._flvparse.arrTag.length>0){this._tagdemux.hasAudio=this.hasAudio=this._flvparse._hasAudio,this._tagdemux.hasVideo=this.hasVideo=this._flvparse._hasVideo,0!=this._tempBaseTime&&this._tempBaseTime==this._flvparse.arrTag[0].getTime()&&(this._tagdemux._timestampBase=0);try{this._tagdemux.moofTag(this._flvparse.arrTag)}catch(e){this.error(e)}this.setflvBase=this.setflvBaseUsually}return n}},{key:"setflvBaseUsually",value:function(e,t){var n=0;try{n=this._flvparse.setFlv(new Uint8Array(e))}catch(e){this.error(e)}if(this._flvparse.arrTag.length>0)try{this._tagdemux.moofTag(this._flvparse.arrTag)}catch(e){this.error(e)}return n}},{key:"onMdiaSegment",value:function(e,t){if(this.onMediaSegment&&this.onMediaSegment(e,new Uint8Array(t.data)),-1!=this._pendingResolveSeekPoint&&"video"==e){var n=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=-1,this.seekCallBack&&this.seekCallBack(n)}}},{key:"Metadata",value:function(e,t){switch(e){case"video":if(this.metas.push(["video",t]),this.m4mof._videoMeta=t,this.hasVideo&&!this.hasAudio)return void this.metaSucc();break;case"audio":if(this.metas.push(["audio",t]),this.m4mof._audioMeta=t,!this.hasVideo&&this.hasAudio)return void this.metaSucc()}this.hasVideo&&this.hasAudio&&this.m4mof._videoMeta&&this.m4mof._audioMeta&&this.metaSucc()}},{key:"metaSucc",value:function(e){var t=this;this.onMediaInfo&&e&&this.onMediaInfo(e||this._tagdemux._mediaInfo,{hasAudio:this.hasAudio,hasVideo:this.hasVideo}),0!=this.metas.length?e||(this.metas.length>1?this.metas.map((function(e){"video"==e[0]?t.ftyp_moov_v=a.default.generateInitSegment([e[1]]):t.ftyp_moov_a=a.default.generateInitSegment([e[1]])})):this.ftyp_moov=a.default.generateInitSegment([this.metas[0][1]]),this.onInitSegment&&0==this.loadmetadata&&(this.ftyp_moov?this.onInitSegment(this.ftyp_moov):this.onInitSegment(this.ftyp_moov_v,this.ftyp_moov_a),this.loadmetadata=!0)):this.metaSuccRun=!0}},{key:"onDataAvailable",value:function(e,t){try{this.m4mof.remux(e,t)}catch(e){this.error(e)}}},{key:"onCdnDropFrame",value:function(e){this._onCdnDropFrame&&this._onCdnDropFrame(e)}},{key:"setflv",value:function(e,t){return this.setflvBase(e,t)}},{key:"setflvloc",value:function(e){if(i.default.setFlv(new Uint8Array(e)),i.default.arrTag.length>0)return i.default.arrTag}},{key:"error",value:function(e){this._error&&this._error(e)}}]),e}(),d=function(e){function t(e){c(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.f2m=new l(e),n.f2m._error=n.error.bind(n),n._onInitSegment=null,n._onMediaSegment=null,n._onMediaInfo=null,n._seekCallBack=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"error",value:function(e){this.emit("error",e.type)}},{key:"seek",value:function(e){this.f2m.seek(e)}},{key:"setflv",value:function(e){return this.f2m.setflv(e,0)}},{key:"setflvloc",value:function(e){return this.f2m.setflvloc(e)}},{key:"onInitSegment",set:function(e){this._onInitSegment=e,this.f2m.onInitSegment=e}},{key:"onMediaSegment",set:function(e){this._onMediaSegment=e,this.f2m.onMediaSegment=e}},{key:"onMediaInfo",set:function(e){this._onMediaInfo=e,this.f2m.onMediaInfo=e}},{key:"seekCallBack",set:function(e){this._seekCallBack=e,this.f2m.seekCallBack=e}},{key:"onCdnDropFrame",set:function(e){console.log("set fun"),this.f2m._onCdnDropFrame=e}}]),t}(u.CustEvent);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(24)),a=f(n(27)),s=f(n(9)),u=f(n(3));function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG=this.constructor.name,this._config={},this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._onCdnDropFrame=null,this._dataOffset=0,this._firstParse=!0,this._dispatch=!1,this._hasAudio=!1,this._hasVideo=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new a.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._videoTrack={type:"video",id:1,sequenceNumber:0,addcoefficient:2,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,addcoefficient:2,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),this._timeInfo={aacFirstDts:0,aacCurrentDtsOffset:0,aacCurrentFixedLen:0,aacFixedRecord:[],avcSampleDuration:40,avcLastDts:0,avcLastPts:0}}return i(e,[{key:"onMediaInfo",value:function(e){this._onMediaInfo=e}},{key:"parseFirstTimeStamp",value:function(e){this._mediaInfo.beginTimeStamp||(this._mediaInfo.beginTimeStamp=e.getTime(),this._mediaInfo.audioCodec&&this._mediaInfo.videoCodec&&this._onMediaInfo(this._mediaInfo))}},{key:"parseMetadata",value:function(e){var t=o.default.parseMetadata(e);this._mediaInfo.metadata&&(this._mediaInfo.metadata=t.onMetaData,this._onMediaInfo(this._mediaInfo)),this._parseScriptData(t)}},{key:"_parseScriptData",value:function(e){var t=e;if(t.hasOwnProperty("onMetaData")){this._metadata,this._metadata=t;var n=this._metadata.onMetaData;if("boolean"==typeof n.hasAudio&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof n.hasVideo&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"==typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"==typeof n.width&&(this._mediaInfo.width=n.width),"number"==typeof n.height&&(this._mediaInfo.height=n.height),"number"==typeof n.duration){if(!this._durationOverrided){var i=Math.floor(n.duration*this._timescale);this._duration=i,this._mediaInfo.duration=i}}else this._mediaInfo.duration=0;if("number"==typeof n.framerate){var o=Math.floor(1e3*n.framerate);if(o>0){var a=o/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=a,this._referenceFrameRate.fps_num=o,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=a,this._timeInfo.avcSampleDuration=Math.ceil(1e3/this._mediaInfo.fps)||40}}if("object"===r(n.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var s=n.keyframes;s.times=n.times,s.filepositions=n.filepositions,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(s),n.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;return this._dispatch=!1,this._mediaInfo.metadata=n,console.log(this.TAG,"Parsed onMetaData"),this._mediaInfo}}},{key:"_parseKeyframesIndex",value:function(e){for(var t=[],n=[],r=1;r<e.times.length;r++){var i=this._timestampBase+Math.floor(1e3*e.times[r]);t.push(i),n.push(e.filepositions[r])}return{times:t,filepositions:n}}},{key:"moofTag",value:function(e){for(var t=0;t<e.length;t++)this._dispatch=!0,this.parseChunks(e[t]);this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack)}},{key:"parseChunks",value:function(e){switch(e.tagType){case 8:this._parseAudioData(e.body.buffer,0,e.body.length,e.getTime()),this.parseFirstTimeStamp(e);break;case 9:this._parseVideoData(e.body.buffer,0,e.body.length,e.getTime(),0),this.parseFirstTimeStamp(e);break;case 18:this.parseMetadata(e.body)}}},{key:"_parseVideoData",value:function(e,t,n,r,i){if(r==this._timestampBase&&0!=this._timestampBase)throw new u.default(r,this._timestampBase,"夭寿啦这个视频不是从0开始");if(n<=1)console.log(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else{var o=new Uint8Array(e,t,n)[0],a=(240&o)>>>4,s=15&o;7===s?this._parseAVCVideoPacket(e,t+1,n-1,r,i,a):this._onError&&this._onError("Flv: Unsupported codec in video frame: "+s)}}},{key:"_parseAVCVideoPacket",value:function(e,t,n,r,i,o){if(n<4)console.log(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var a=this._littleEndian,s=new DataView(e,t,n),u=s.getUint8(0),f=16777215&s.getUint32(0,!a);if(0===u)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===u)this._parseAVCVideoData(e,t+4,n-4,r,i,o,f);else if(2!==u)return void this._onError("Flv: Invalid video packet type "+u)}}},{key:"_parseAVCDecoderConfigurationRecord",value:function(e,t,n){if(n<7)console.log(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var r=this._videoMetadata,i=this._videoTrack,o=this._littleEndian,a=new DataView(e,t,n);r?void 0!==r.avcc&&console.log(this.TAG,"Found another AVCDecoderConfigurationRecord!"):((r=this._videoMetadata={}).type="video",r.id=i.id,r.timescale=this._timescale,r.duration=this._duration);var u=a.getUint8(0),f=a.getUint8(1);if(a.getUint8(2),a.getUint8(3),1===u&&0!==f)if(this._naluLengthSize=1+(3&a.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var c=31&a.getUint8(5);if(0===c||c>1)this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid H264 SPS count: "+c);else{for(var l=6,d=0;d<c;d++){var h=a.getUint16(l,!o);if(l+=2,0!==h){var p=new Uint8Array(e,t+l,h);l+=h;var v=s.default.parseSPS(p);r.codecWidth=v.codec_size.width,r.codecHeight=v.codec_size.height,r.presentWidth=v.present_size.width,r.presentHeight=v.present_size.height,r.config=v,r.profile=v.profile_string,r.level=v.level_string,r.bitDepth=v.bit_depth,r.chromaFormat=v.chroma_format,r.sarRatio=v.sar_ratio,r.frameRate=v.frame_rate,!1!==v.frame_rate.fixed&&0!==v.frame_rate.fps_num&&0!==v.frame_rate.fps_den||(r.frameRate=this._referenceFrameRate);var m=r.frameRate.fps_den,y=r.frameRate.fps_num;r.refSampleDuration=Math.floor(r.timescale*(m/y));for(var g=p.subarray(1,4),b="avc1.",_=0;_<3;_++){var w=g[_].toString(16);w.length<2&&(w="0"+w),b+=w}r.codec=b;var S=this._mediaInfo;S.width=r.codecWidth,S.height=r.codecHeight,S.fps=r.frameRate.fps,S.profile=r.profile,S.level=r.level,S.chromaFormat=v.chroma_format_string,S.sarNum=r.sarRatio.width,S.sarDen=r.sarRatio.height,S.videoCodec=b,S.meta=r,S.hasAudio?null!=S.audioCodec&&(S.mimeType='video/x-flv; codecs="'+S.videoCodec+","+S.audioCodec+'"'):S.mimeType='video/x-flv; codecs="'+S.videoCodec+'"',S.isComplete()&&this._onMediaInfo(S)}}var k=a.getUint8(l);if(0===k||k>1)this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid H264 PPS count: "+k);else{l++;for(var E=0;E<k;E++){var O=a.getUint16(l,!o);l+=2,0!==O&&(l+=O)}r.avcc=new Uint8Array(n),r.avcc.set(new Uint8Array(e,t,n),0),console.log(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",r)}}}else this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}}},{key:"timestampBase",value:function(e){this._timestampBase=e}},{key:"_parseAVCVideoData",value:function(e,t,n,r,i,o,a){for(var s=this._littleEndian,u=new DataView(e,t,n),f=[],c=0,l=0,d=this._naluLengthSize,h=this._timestampBase+r,p=1===o,v=h,m=0;m<this._timeInfo.aacFixedRecord.length;m++)if(h>this._timeInfo.aacFixedRecord[m].ed){this._timeInfo.aacFixedRecord.splice(0,m);break}if(this._timeInfo.avcLastDts&&v-this._timeInfo.avcLastDts>this._timeInfo.avcSampleDuration){for(var y=!1,g=0;g<this._timeInfo.aacFixedRecord.length;g++)if(v>=this._timeInfo.aacFixedRecord[g].st&&v<=this._timeInfo.aacFixedRecord[g].ed){v-=this._timeInfo.aacFixedRecord[g].fix,y=!0,this._timeInfo.aacFixedRecord[g].ed==Number.POSITIVE_INFINITY&&v-this._timeInfo.avcLastDts>this._timeInfo.avcSampleDuration&&(y=!1);break}y||(v=this._timeInfo.avcLastDts+this._timeInfo.avcSampleDuration),v<=this._timeInfo.avcLastDts&&(v=this._timeInfo.avcLastDts+1)}for(var b=v+a;l<n;){if(l+4>=n){console.log(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+l+", dataSize = "+n);break}var _=u.getUint32(l,!s);if(3===d&&(_>>>=8),_>n-d)return void console.log(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var w=31&u.getUint8(l+d);5===w&&(p=!0);var S=new Uint8Array(e,t+l,d+_),k={type:w,data:S};f.push(k),c+=S.byteLength,l+=d+_}if(f.length){var E=this._videoTrack,O={units:f,length:c,isKeyframe:p,dts:v,cts:a,pts:b};p&&(O.fileposition=i),E.samples.push(O),E.length+=c}this._timeInfo.avcLastDts=v}},{key:"_parseAudioData",value:function(e,t,n,r){if(r==this._timestampBase&&0!=this._timestampBase&&console.log(r,this._timestampBase,"夭寿啦这个视频不是从0开始"),n<=1)console.log(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else{var i=this._audioMetadata,o=this._audioTrack;if(!i||!i.codec){(i=this._audioMetadata={}).type="audio",i.id=o.id,i.timescale=this._timescale,i.duration=this._duration,this._littleEndian;var a=new DataView(e,t,n).getUint8(0),s=a>>>4;if(10!==s)return void this._onError(DemuxErrors.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+s);var u=0,f=(12&a)>>>2,c=[5500,11025,22050,44100,48e3];if(!(f<c.length))return void this._onError(DemuxErrors.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+f);u=c[f];var l=1&a;i.audioSampleRate=u,i.channelCount=0===l?1:2,i.refSampleDuration=Math.floor(1024/i.audioSampleRate*i.timescale),i.codec="mp4a.40.5"}var d=this._parseAACAudioData(e,t+1,n-1);if(null!=d){if(0===d.packetType){i.config&&console.log(this.TAG,"Found another AudioSpecificConfig!");var h=d.data;i.audioSampleRate=h.samplingRate,i.channelCount=h.channelCount,i.codec=h.codec,i.config=h.config,i.refSampleDuration=Math.floor(1024/i.audioSampleRate*i.timescale),console.log(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1;var p=this._mediaInfo;return p.audioCodec="mp4a.40."+h.originalAudioObjectType,p.audioSampleRate=i.audioSampleRate,p.audioChannelCount=i.channelCount,p.hasVideo?null!=p.videoCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.audioCodec+'"',this._onTrackMetadata("audio",i),void(p.isComplete()&&this._onMediaInfo(p))}if(1===d.packetType){var v=this._timestampBase+r;this._timeInfo.aacFirstDts||(this._timeInfo.aacFirstDts=v);var m=v-Math.floor(this._timeInfo.aacFirstDts+this._timeInfo.aacCurrentDtsOffset)-this._timeInfo.aacCurrentFixedLen;m>1&&(this._timeInfo.aacCurrentFixedLen+=m,this._timeInfo.aacFixedRecord.length&&(this._timeInfo.aacFixedRecord[this._timeInfo.aacFixedRecord.length-1].ed=v),this._timeInfo.aacFixedRecord.push({st:v,fix:this._timeInfo.aacCurrentFixedLen,ed:Number.POSITIVE_INFINITY}),this._onCdnDropFrame&&this._onCdnDropFrame(m));var y=1024e3/i.audioSampleRate,g=Math.floor(this._timeInfo.aacFirstDts+this._timeInfo.aacCurrentDtsOffset),b={unit:d.data,dts:g,pts:g,length:y};this._timeInfo.aacCurrentDtsOffset+=y,o.samples.push(b),o.length+=d.data.length}else console.log(this.TAG,"Flv: Unsupported AAC data type "+d.packetType)}}}},{key:"_parseAACAudioData",value:function(e,t,n){if(!(n<=1)){var r={},i=new Uint8Array(e,t,n);return r.packetType=i[0],0===i[0]?r.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):r.data=i.subarray(1),r}console.log(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")}},{key:"_parseAACAudioSpecificConfig",value:function(e,t,n){var r,i,o=new Uint8Array(e,t,n),a=null,s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u=0,f=null;if(u=r=o[0]>>>3,(i=(7&o[0])<<1|o[1]>>>7)<0||i>=s.length)this._onError(DemuxErrors.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var c=s[i],l=(120&o[1])>>>3;if(!(l<0||l>=8)){5===u&&(f=(7&o[1])<<1|o[2]>>>7,o[2]);var d=self.navigator.userAgent.toLowerCase();return-1!==d.indexOf("firefox")?i>=6?(u=5,a=new Array(4),f=i-3):(u=2,a=new Array(2),f=i):-1!==d.indexOf("android")?(u=2,a=new Array(2),f=i):(u=5,f=i,a=new Array(4),i>=6?f=i-3:1===l&&(u=2,a=new Array(2),f=i)),a[0]=u<<3,a[0]|=(15&i)>>>1,a[1]=(15&i)<<7,a[1]|=(15&l)<<3,5===u&&(a[1]|=(15&f)>>>1,a[2]=(1&f)<<7,a[2]|=8,a[3]=0),{config:a,samplingRate:c,channelCount:l,codec:"mp4a.40."+u,originalAudioObjectType:r}}this._onError(DemuxErrors.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:void 0}},{key:"hasAudio",set:function(e){this._mediaInfo.hasAudio=this._hasAudio=e}},{key:"hasVideo",set:function(e){this._mediaInfo.hasVideo=this._hasVideo=e}},{key:"onCdnDropFrame",set:function(e){this._onCdnDropFrame=e}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(26),a=(r=o)&&r.__esModule?r:{default:r},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),i=0,o=0;o<n;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(r[i]=t[o],i++);return new Uint8Array(r.buffer,0,i)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),r=new a.default(n);r.readByte();var i=r.readByte();r.readByte();var o=r.readByte();r.readUEG();var s=e.getProfileString(i),u=e.getLevelString(o),f=1,c=420,l=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(f=r.readUEG())&&r.readBits(1),f<=3&&(c=[0,420,422,444][f]),l=r.readUEG()+8,r.readUEG(),r.readBits(1),r.readBool()))for(var d=3!==f?8:12,h=0;h<d;h++)r.readBool()&&(h<6?e._skipScalingList(r,16):e._skipScalingList(r,64));r.readUEG();var p=r.readUEG();if(0===p)r.readUEG();else if(1===p){r.readBits(1),r.readSEG(),r.readSEG();for(var v=r.readUEG(),m=0;m<v;m++)r.readSEG()}r.readUEG(),r.readBits(1);var y=r.readUEG(),g=r.readUEG(),b=r.readBits(1);0===b&&r.readBits(1),r.readBits(1);var _=0,w=0,S=0,k=0;r.readBool()&&(_=r.readUEG(),w=r.readUEG(),S=r.readUEG(),k=r.readUEG());var E=1,O=1,T=0,A=!0,x=0,R=0;if(r.readBool()){if(r.readBool()){var M=r.readByte();M>0&&M<16?(E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][M-1],O=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][M-1]):255===M&&(E=r.readByte()<<8|r.readByte(),O=r.readByte()<<8|r.readByte())}if(r.readBool()&&r.readBool(),r.readBool()&&(r.readBits(4),r.readBool()&&r.readBits(24)),r.readBool()&&(r.readUEG(),r.readUEG()),r.readBool()){var D=r.readBits(32),L=r.readBits(32);A=r.readBool(),T=(x=L)/(R=2*D)}}var P=1;1===E&&1===O||(P=E/O);var B=0,C=0;0===f?(B=1,C=2-b):(B=3===f?1:2,C=(1===f?2:1)*(2-b));var I=16*(y+1),j=16*(g+1)*(2-b);I-=(_+w)*B,j-=(S+k)*C;var N=Math.ceil(I*P);return r.destroy(),r=null,{profile_string:s,level_string:u,bit_depth:l,chroma_format:c,chroma_format_string:e.getChromaFormatString(c),frame_rate:{fixed:A,fps:T,fps_den:R,fps_num:x},sar_ratio:{width:E,height:O},codec_size:{width:I,height:j},present_size:{width:N,height:j}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=(n+e.readSEG()+256)%256),n=0===r?n:r}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=e.constants={};n.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),n.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),n.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSC=n.STCO=n.STTS,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(e){for(var t=8,n=null,r=Array.prototype.slice.call(arguments,1),i=r.length,o=0;o<i;o++)t+=r[o].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var a=8,s=0;s<i;s++)n.set(r[s],a),a+=r[s].byteLength;return n}},{key:"generateInitSegment",value:function(t){t.constructor!=Array&&(t=[t]);var n=e.box(e.types.ftyp,e.constants.FTYP),r=e.moov(t),i=new Uint8Array(n.byteLength+r.byteLength);return i.set(n,0),i.set(r,n.byteLength),i}},{key:"moov",value:function(t){var n=e.mvhd(t[0].timescale,t[0].duration),r=e.trak(t[0]),i=void 0;t.length>1&&(i=e.trak(t[1]));var o=e.mvex(t);return t.length>1?e.box(e.types.moov,n,r,i,o):e.box(e.types.moov,n,r,o)}},{key:"mvhd",value:function(t,n){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration,i=t.presentWidth,o=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,o>>>8&255,255&o,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))}},{key:"mdhd",value:function(t){var n=t.timescale,r=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,85,196,0,0]))}},{key:"hdlr",value:function(t){var n=null;return n="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,n)}},{key:"minf",value:function(t){var n=null;return n="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,n,e.dinf(),e.stbl(t))}},{key:"dinf",value:function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))}},{key:"stsd",value:function(t){return"audio"===t.type?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))}},{key:"mp4a",value:function(t){var n=t.channelCount,r=t.audioSampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,r>>>8&255,255&r,0,0]);return e.box(e.types.mp4a,i,e.esds(t))}},{key:"esds",value:function(t){var n=t.config,r=n.length,i=new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(n).concat([6,1,2]));return e.box(e.types.esds,i)}},{key:"avc1",value:function(t){var n=t.avcc,r=t.codecWidth,i=t.codecHeight,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>>8&255,255&r,i>>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,4,103,49,49,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,o,e.box(e.types.avcC,n))}},{key:"mvex",value:function(t){return t.length>1?e.box(e.types.mvex,e.trex(t[0]),e.trex(t[1])):e.box(e.types.mvex,e.trex(t[0]))}},{key:"trex",value:function(t){var n=t.id,r=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,r)}},{key:"moof",value:function(t,n){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,n))}},{key:"mfhd",value:function(t){var n=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,n)}},{key:"traf",value:function(t,n){var r=t.id,i=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),o=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,i,o,s,a)}},{key:"sdtp",value:function(t){for(var n=t.samples||[],r=n.length,i=new Uint8Array(4+r),o=0;o<r;o++){var a=n[o].flags;i[o+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,i)}},{key:"trun",value:function(t,n){var r=t.samples||[],i=r.length,o=12+16*i,a=new Uint8Array(o);n+=8+o,a.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<i;s++){var u=r[s].duration,f=r[s].size,c=r[s].flags,l=r[s].cts;a.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,f>>>24&255,f>>>16&255,f>>>8&255,255&f,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.isNonSync,0,0,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*s)}return e.box(e.types.trun,a)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();t.default=i},function(e,t,n){(function(e){!function(t){"use strict";var n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var o=Math.ceil,a=Math.floor,s=function(e){return isNaN(e=+e)?0:(e>0?a:o)(e)},u=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},f=i((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),c=i((function(e){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)})),l=(c.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),d=function(e,t,n){if(l(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},h=function(e){return"object"==typeof e?null!==e:"function"==typeof e},p=function(e){if(!h(e))throw TypeError(e+" is not an object!");return e},v=function(e){try{return!!e()}catch(e){return!0}},m=!v((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),y=f.document,g=h(y)&&h(y.createElement),b=function(e){return g?y.createElement(e):{}},_=!m&&!v((function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a})),w=function(e,t){if(!h(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!h(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!h(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!h(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},S=Object.defineProperty,k={f:m?Object.defineProperty:function(e,t,n){if(p(e),t=w(t,!0),p(n),_)try{return S(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},E=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},O=m?function(e,t,n){return k.f(e,t,E(1,n))}:function(e,t,n){return e[t]=n,e},T=function(e,t,n){var r,i,o,a=e&T.F,s=e&T.G,u=e&T.S,l=e&T.P,h=e&T.B,p=e&T.W,v=s?c:c[t]||(c[t]={}),m=v.prototype,y=s?f:u?f[t]:(f[t]||{}).prototype;for(r in s&&(n=t),n)(i=!a&&y&&void 0!==y[r])&&r in v||(o=i?y[r]:n[r],v[r]=s&&"function"!=typeof y[r]?n[r]:h&&i?d(o,f):p&&y[r]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(o):l&&"function"==typeof o?d(Function.call,o):o,l&&((v.virtual||(v.virtual={}))[r]=o,e&T.R&&m&&!m[r]&&O(m,r,o)))};T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128;var A,x=T,R=O,M={}.hasOwnProperty,D=function(e,t){return M.call(e,t)},L={},P={}.toString,B=function(e){return P.call(e).slice(8,-1)},C=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==B(e)?e.split(""):Object(e)},I=function(e){return C(u(e))},j=Math.min,N=function(e){return e>0?j(s(e),9007199254740991):0},F=Math.max,U=Math.min,V=f["__core-js_shared__"]||(f["__core-js_shared__"]={}),z=function(e){return V[e]||(V[e]={})},G=0,W=Math.random(),q=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++G+W).toString(36))},H=z("keys"),K=function(e){return H[e]||(H[e]=q(e))},Y=(A=!1,function(e,t,n){var r,i=I(e),o=N(i.length),a=function(e,t){return(e=s(e))<0?F(e+t,0):U(e,t)}(n,o);if(A&&t!=t){for(;o>a;)if((r=i[a++])!=r)return!0}else for(;o>a;a++)if((A||a in i)&&i[a]===t)return A||a||0;return!A&&-1}),J=K("IE_PROTO"),X=function(e,t){var n,r=I(e),i=0,o=[];for(n in r)n!=J&&D(r,n)&&o.push(n);for(;t.length>i;)D(r,n=t[i++])&&(~Y(o,n)||o.push(n));return o},$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(e){return X(e,$)},Z=m?Object.defineProperties:function(e,t){p(e);for(var n,r=Q(t),i=r.length,o=0;i>o;)k.f(e,n=r[o++],t[n]);return e},ee=f.document,te=ee&&ee.documentElement,ne=K("IE_PROTO"),re=function(){},ie=function(){var e,t=b("iframe"),n=$.length;for(t.style.display="none",te.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ie=e.F;n--;)delete ie.prototype[$[n]];return ie()},oe=Object.create||function(e,t){var n;return null!==e?(re.prototype=p(e),n=new re,re.prototype=null,n[ne]=e):n=ie(),void 0===t?n:Z(n,t)},ae=i((function(e){var t=z("wks"),n=f.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:q)("Symbol."+e))}).store=t})),se=k.f,ue=ae("toStringTag"),fe=function(e,t,n){e&&!D(e=n?e:e.prototype,ue)&&se(e,ue,{configurable:!0,value:t})},ce={};O(ce,ae("iterator"),(function(){return this}));var le,de=function(e,t,n){e.prototype=oe(ce,{next:E(1,n)}),fe(e,t+" Iterator")},he=function(e){return Object(u(e))},pe=K("IE_PROTO"),ve=Object.prototype,me=Object.getPrototypeOf||function(e){return e=he(e),D(e,pe)?e[pe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ve:null},ye=ae("iterator"),ge=!([].keys&&"next"in[].keys()),be=function(){return this},_e=function(e,t,n,r,i,o,a){de(n,t,r);var s,u,f,c=function(e){if(!ge&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},l=t+" Iterator",d="values"==i,h=!1,p=e.prototype,v=p[ye]||p["@@iterator"]||i&&p[i],m=!ge&&v||c(i),y=i?d?c("entries"):m:void 0,g="Array"==t&&p.entries||v;if(g&&(f=me(g.call(new e)))!==Object.prototype&&f.next&&fe(f,l,!0),d&&v&&"values"!==v.name&&(h=!0,m=function(){return v.call(this)}),a&&(ge||h||!p[ye])&&O(p,ye,m),L[t]=m,L[l]=be,i)if(s={values:d?m:c("values"),keys:o?m:c("keys"),entries:y},a)for(u in s)u in p||R(p,u,s[u]);else x(x.P+x.F*(ge||h),t,s);return s},we=(le=!0,function(e,t){var n,r,i=String(u(e)),o=s(t),a=i.length;return o<0||o>=a?le?"":void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===a||(r=i.charCodeAt(o+1))<56320||r>57343?le?i.charAt(o):n:le?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});_e(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=we(t,n),this._i+=e.length,{value:e,done:!1})}));var Se=function(e,t,n,r){try{return r?t(p(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&p(i.call(e)),t}},ke=ae("iterator"),Ee=Array.prototype,Oe=function(e){return void 0!==e&&(L.Array===e||Ee[ke]===e)},Te=function(e,t,n){t in e?k.f(e,t,E(0,n)):e[t]=n},Ae=ae("toStringTag"),xe="Arguments"==B(function(){return arguments}()),Re=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ae))?n:xe?B(t):"Object"==(r=B(t))&&"function"==typeof t.callee?"Arguments":r},Me=ae("iterator"),De=c.getIteratorMethod=function(e){if(null!=e)return e[Me]||e["@@iterator"]||L[Re(e)]},Le=ae("iterator"),Pe=!1;try{[7][Le]().return=function(){Pe=!0}}catch(e){}var Be=function(e,t){if(!t&&!Pe)return!1;var n=!1;try{var r=[7],i=r[Le]();i.next=function(){return{done:n=!0}},r[Le]=function(){return i},e(r)}catch(e){}return n};x(x.S+x.F*!Be((function(e){})),"Array",{from:function(e){var t,n,r,i,o=he(e),a="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,f=void 0!==u,c=0,l=De(o);if(f&&(u=d(u,s>2?arguments[2]:void 0,2)),null==l||a==Array&&Oe(l))for(n=new a(t=N(o.length));t>c;c++)Te(n,c,f?u(o[c],c):o[c]);else for(i=l.call(o),n=new a;!(r=i.next()).done;c++)Te(n,c,f?Se(i,u,[r.value,c],!0):r.value);return n.length=c,n}});var Ce=c.Array.from,Ie=i((function(e){e.exports={default:Ce,__esModule:!0}})),je=r(Ie),Ne=r(i((function(e,t){t.__esModule=!0;var n,r=(n=Ie)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}}))),Fe=function(e,t){return{value:t,done:!!e}};_e(Array,"Array",(function(e,t){this._t=I(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Fe(1)):Fe(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),L.Arguments=L.Array;for(var Ue=ae("toStringTag"),Ve="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),ze=0;ze<Ve.length;ze++){var Ge=Ve[ze],We=f[Ge],qe=We&&We.prototype;qe&&!qe[Ue]&&O(qe,Ue,Ge),L[Ge]=L.Array}var He={f:ae},Ke=He.f("iterator"),Ye=i((function(e){e.exports={default:Ke,__esModule:!0}}));r(Ye);var Je=i((function(e){var t=q("meta"),n=k.f,r=0,i=Object.isExtensible||function(){return!0},o=!v((function(){return i(Object.preventExtensions({}))})),a=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!h(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!D(e,t)){if(!i(e))return"F";if(!n)return"E";a(e)}return e[t].i},getWeak:function(e,n){if(!D(e,t)){if(!i(e))return!0;if(!n)return!1;a(e)}return e[t].w},onFreeze:function(e){return o&&s.NEED&&i(e)&&!D(e,t)&&a(e),e}}})),Xe=(Je.KEY,Je.NEED,Je.fastKey,Je.getWeak,Je.onFreeze,k.f),$e=function(e){var t=c.Symbol||(c.Symbol={});"_"==e.charAt(0)||e in t||Xe(t,e,{value:He.f(e)})},Qe={f:Object.getOwnPropertySymbols},Ze={f:{}.propertyIsEnumerable},et=Array.isArray||function(e){return"Array"==B(e)},tt=$.concat("length","prototype"),nt={f:Object.getOwnPropertyNames||function(e){return X(e,tt)}},rt=nt.f,it={}.toString,ot="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],at={f:function(e){return ot&&"[object Window]"==it.call(e)?function(e){try{return rt(e)}catch(e){return ot.slice()}}(e):rt(I(e))}},st=Object.getOwnPropertyDescriptor,ut={f:m?st:function(e,t){if(e=I(e),t=w(t,!0),_)try{return st(e,t)}catch(e){}if(D(e,t))return E(!Ze.f.call(e,t),e[t])}},ft=Je.KEY,ct=ut.f,lt=k.f,dt=at.f,ht=f.Symbol,pt=f.JSON,vt=pt&&pt.stringify,mt=ae("_hidden"),yt=ae("toPrimitive"),gt={}.propertyIsEnumerable,bt=z("symbol-registry"),_t=z("symbols"),wt=z("op-symbols"),St=Object.prototype,kt="function"==typeof ht,Et=f.QObject,Ot=!Et||!Et.prototype||!Et.prototype.findChild,Tt=m&&v((function(){return 7!=oe(lt({},"a",{get:function(){return lt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=ct(St,t);r&&delete St[t],lt(e,t,n),r&&e!==St&&lt(St,t,r)}:lt,At=function(e){var t=_t[e]=oe(ht.prototype);return t._k=e,t},xt=kt&&"symbol"==typeof ht.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ht},Rt=function(e,t,n){return e===St&&Rt(wt,t,n),p(e),t=w(t,!0),p(n),D(_t,t)?(n.enumerable?(D(e,mt)&&e[mt][t]&&(e[mt][t]=!1),n=oe(n,{enumerable:E(0,!1)})):(D(e,mt)||lt(e,mt,E(1,{})),e[mt][t]=!0),Tt(e,t,n)):lt(e,t,n)},Mt=function(e,t){p(e);for(var n,r=function(e){var t=Q(e),n=Qe.f;if(n)for(var r,i=n(e),o=Ze.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}(t=I(t)),i=0,o=r.length;o>i;)Rt(e,n=r[i++],t[n]);return e},Dt=function(e){var t=gt.call(this,e=w(e,!0));return!(this===St&&D(_t,e)&&!D(wt,e))&&(!(t||!D(this,e)||!D(_t,e)||D(this,mt)&&this[mt][e])||t)},Lt=function(e,t){if(e=I(e),t=w(t,!0),e!==St||!D(_t,t)||D(wt,t)){var n=ct(e,t);return!n||!D(_t,t)||D(e,mt)&&e[mt][t]||(n.enumerable=!0),n}},Pt=function(e){for(var t,n=dt(I(e)),r=[],i=0;n.length>i;)D(_t,t=n[i++])||t==mt||t==ft||r.push(t);return r},Bt=function(e){for(var t,n=e===St,r=dt(n?wt:I(e)),i=[],o=0;r.length>o;)!D(_t,t=r[o++])||n&&!D(St,t)||i.push(_t[t]);return i};kt||(R((ht=function(){if(this instanceof ht)throw TypeError("Symbol is not a constructor!");var e=q(arguments.length>0?arguments[0]:void 0),t=function(n){this===St&&t.call(wt,n),D(this,mt)&&D(this[mt],e)&&(this[mt][e]=!1),Tt(this,e,E(1,n))};return m&&Ot&&Tt(St,e,{configurable:!0,set:t}),At(e)}).prototype,"toString",(function(){return this._k})),ut.f=Lt,k.f=Rt,nt.f=at.f=Pt,Ze.f=Dt,Qe.f=Bt,He.f=function(e){return At(ae(e))}),x(x.G+x.W+x.F*!kt,{Symbol:ht});for(var Ct="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),It=0;Ct.length>It;)ae(Ct[It++]);for(var jt=Q(ae.store),Nt=0;jt.length>Nt;)$e(jt[Nt++]);x(x.S+x.F*!kt,"Symbol",{for:function(e){return D(bt,e+="")?bt[e]:bt[e]=ht(e)},keyFor:function(e){if(!xt(e))throw TypeError(e+" is not a symbol!");for(var t in bt)if(bt[t]===e)return t},useSetter:function(){Ot=!0},useSimple:function(){Ot=!1}}),x(x.S+x.F*!kt,"Object",{create:function(e,t){return void 0===t?oe(e):Mt(oe(e),t)},defineProperty:Rt,defineProperties:Mt,getOwnPropertyDescriptor:Lt,getOwnPropertyNames:Pt,getOwnPropertySymbols:Bt}),pt&&x(x.S+x.F*(!kt||v((function(){var e=ht();return"[null]"!=vt([e])||"{}"!=vt({a:e})||"{}"!=vt(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(h(t)||void 0!==e)&&!xt(e))return et(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!xt(t))return t}),r[1]=t,vt.apply(pt,r)}}),ht.prototype[yt]||O(ht.prototype,yt,ht.prototype.valueOf),fe(ht,"Symbol"),fe(Math,"Math",!0),fe(f.JSON,"JSON",!0),$e("asyncIterator"),$e("observable");var Ft=c.Symbol,Ut=i((function(e){e.exports={default:Ft,__esModule:!0}}));r(Ut);var Vt,zt,Gt,Wt,qt=r(i((function(e,t){t.__esModule=!0;var n=o(Ye),r=o(Ut),i="function"==typeof r.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===i(n.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":i(e)}})));Vt="keys",zt=function(){return function(e){return Q(he(e))}},Gt=(c.Object||{})[Vt]||Object[Vt],(Wt={})[Vt]=zt(Gt),x(x.S+x.F*v((function(){Gt(1)})),"Object",Wt);var Ht=c.Object.keys,Kt=r(i((function(e){e.exports={default:Ht,__esModule:!0}}))),Yt=Math.floor;x(x.S,"Number",{isInteger:function(e){return!h(e)&&isFinite(e)&&Yt(e)===e}});var Jt=c.Number.isInteger,Xt=r(i((function(e){e.exports={default:Jt,__esModule:!0}}))),$t="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Qt="["+$t+"]",Zt=RegExp("^"+Qt+Qt+"*"),en=RegExp(Qt+Qt+"*$"),tn=function(e,t,n){var r={},i=v((function(){return!!$t[e]()||"​"!="​"[e]()})),o=r[e]=i?t(nn):$t[e];n&&(r[n]=o),x(x.P+x.F*i,"String",r)},nn=tn.trim=function(e,t){return e=String(u(e)),1&t&&(e=e.replace(Zt,"")),2&t&&(e=e.replace(en,"")),e},rn=tn,on=f.parseFloat,an=rn.trim,sn=1/on($t+"-0")!=-1/0?function(e){var t=an(String(e),3),n=on(t);return 0===n&&"-"==t.charAt(0)?-0:n}:on;x(x.S+x.F*(Number.parseFloat!=sn),"Number",{parseFloat:sn});var un=parseFloat,fn=r(i((function(e){e.exports={default:un,__esModule:!0}})));function cn(e){return null==e}function ln(e){return Array.isArray(e)}function dn(e){return"function"==typeof e}function hn(e){return Object(e)===e&&"[object Object]"===String(e)&&!dn(e)&&!ln(e)}function pn(e){return"number"==typeof e}function vn(e){return e instanceof Blob}function mn(e){return"string"==typeof e||e instanceof String}function yn(e){return"boolean"==typeof e}function gn(e){return cn(e)||yn(e)||mn(e)||pn(e)}function bn(e){return!!("object"===("undefined"==typeof Node?"undefined":qt(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":qt(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function _n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};function n(r,i,o){if(ln(r)||hn(r)){for(var a in i=gn(i)?hn(r)?{}:[]:i,r)t(i,a,n(r[a],i[a],a));return i}return e(r,i,o)}return n}var wn=_n((function(e){return e}));function Sn(e,t){return e.replace(/(^|[^a-zA-Z]+)([a-zA-Z])/g,(function(e,n,r,i){return t||0!==i?r.toUpperCase():r.toLowerCase()}))}function kn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var En,On,Tn,An=i((function(e){var t={},n={},r=e.exports=function(e,r,i,o,a){var s,u,f,c,l=a?function(){return e}:De(e),h=d(i,o,r?2:1),v=0;if("function"!=typeof l)throw TypeError(e+" is not iterable!");if(Oe(l)){for(s=N(e.length);s>v;v++)if((c=r?h(p(u=e[v])[0],u[1]):h(e[v]))===t||c===n)return c}else for(f=l.call(e);!(u=f.next()).done;)if((c=Se(f,h,u.value,r))===t||c===n)return c};r.BREAK=t,r.RETURN=n})),xn=ae("species"),Rn=function(e,t){var n,r=p(e).constructor;return void 0===r||null==(n=p(r)[xn])?t:l(n)},Mn=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},Dn=f.process,Ln=f.setImmediate,Pn=f.clearImmediate,Bn=f.MessageChannel,Cn=f.Dispatch,In=0,jn={},Nn=function(){var e=+this;if(jn.hasOwnProperty(e)){var t=jn[e];delete jn[e],t()}},Fn=function(e){Nn.call(e.data)};Ln&&Pn||(Ln=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return jn[++In]=function(){Mn("function"==typeof e?e:Function(e),t)},En(In),In},Pn=function(e){delete jn[e]},"process"==B(Dn)?En=function(e){Dn.nextTick(d(Nn,e,1))}:Cn&&Cn.now?En=function(e){Cn.now(d(Nn,e,1))}:Bn?(Tn=(On=new Bn).port2,On.port1.onmessage=Fn,En=d(Tn.postMessage,Tn,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(En=function(e){f.postMessage(e+"","*")},f.addEventListener("message",Fn,!1)):En="onreadystatechange"in b("script")?function(e){te.appendChild(b("script")).onreadystatechange=function(){te.removeChild(this),Nn.call(e)}}:function(e){setTimeout(d(Nn,e,1),0)});var Un={set:Ln,clear:Pn},Vn=Un.set,zn=f.MutationObserver||f.WebKitMutationObserver,Gn=f.process,Wn=f.Promise,qn="process"==B(Gn);function Hn(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=l(t),this.reject=l(n)}var Kn,Yn,Jn,Xn,$n={f:function(e){return new Hn(e)}},Qn=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Zn=function(e,t){if(p(e),h(t)&&t.constructor===e)return t;var n=$n.f(e);return(0,n.resolve)(t),n.promise},er=ae("species"),tr=Un.set,nr=function(){var e,t,n,r=function(){var r,i;for(qn&&(r=Gn.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(qn)n=function(){Gn.nextTick(r)};else if(!zn||f.navigator&&f.navigator.standalone)if(Wn&&Wn.resolve){var i=Wn.resolve();n=function(){i.then(r)}}else n=function(){Vn.call(f,r)};else{var o=!0,a=document.createTextNode("");new zn(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}(),rr=f.TypeError,ir=f.process,or=f.Promise,ar="process"==Re(ir),sr=function(){},ur=Yn=$n.f,fr=!!function(){try{var e=or.resolve(1),t=(e.constructor={})[ae("species")]=function(e){e(sr,sr)};return(ar||"function"==typeof PromiseRejectionEvent)&&e.then(sr)instanceof t}catch(e){}}(),cr=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},lr=function(e,t){if(!e._n){e._n=!0;var n=e._c;nr((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,f=t.domain;try{a?(i||(2==e._h&&pr(e),e._h=1),!0===a?n=r:(f&&f.enter(),n=a(r),f&&f.exit()),n===t.promise?u(rr("Promise-chain cycle")):(o=cr(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&dr(e)}))}},dr=function(e){tr.call(f,(function(){var t,n,r,i=e._v,o=hr(e);if(o&&(t=Qn((function(){ar?ir.emit("unhandledRejection",i,e):(n=f.onunhandledrejection)?n({promise:e,reason:i}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=ar||hr(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},hr=function(e){return 1!==e._h&&0===(e._a||e._c).length},pr=function(e){tr.call(f,(function(){var t;ar?ir.emit("rejectionHandled",e):(t=f.onrejectionhandled)&&t({promise:e,reason:e._v})}))},vr=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),lr(t,!0))},mr=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw rr("Promise can't be resolved itself");(t=cr(e))?nr((function(){var r={_w:n,_d:!1};try{t.call(e,d(mr,r,1),d(vr,r,1))}catch(e){vr.call(r,e)}})):(n._v=e,n._s=1,lr(n,!1))}catch(e){vr.call({_w:n,_d:!1},e)}}};fr||(or=function(e){!function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!")}(this,or,"Promise","_h"),l(e),Kn.call(this);try{e(d(mr,this,1),d(vr,this,1))}catch(e){vr.call(this,e)}},(Kn=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:O(e,r,t[r]);return e}(or.prototype,{then:function(e,t){var n=ur(Rn(this,or));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=ar?ir.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&lr(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Jn=function(){var e=new Kn;this.promise=e,this.resolve=d(mr,e,1),this.reject=d(vr,e,1)},$n.f=ur=function(e){return e===or||e===Xn?new Jn(e):Yn(e)}),x(x.G+x.W+x.F*!fr,{Promise:or}),fe(or,"Promise"),function(e){var t="function"==typeof c[e]?c[e]:f[e];m&&t&&!t[er]&&k.f(t,er,{configurable:!0,get:function(){return this}})}("Promise"),Xn=c.Promise,x(x.S+x.F*!fr,"Promise",{reject:function(e){var t=ur(this);return(0,t.reject)(e),t.promise}}),x(x.S+!0*x.F,"Promise",{resolve:function(e){return Zn(this===Xn?or:this,e)}}),x(x.S+x.F*!(fr&&Be((function(e){or.all(e).catch(sr)}))),"Promise",{all:function(e){var t=this,n=ur(t),r=n.resolve,i=n.reject,o=Qn((function(){var n=[],o=0,a=1;An(e,!1,(function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=ur(t),r=n.reject,i=Qn((function(){An(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}}),x(x.P+x.R,"Promise",{finally:function(e){var t=Rn(this,c.Promise||f.Promise),n="function"==typeof e;return this.then(n?function(n){return Zn(t,e()).then((function(){return n}))}:e,n?function(n){return Zn(t,e()).then((function(){throw n}))}:e)}}),x(x.S,"Promise",{try:function(e){var t=$n.f(this),n=Qn(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var yr=c.Promise,gr=r(i((function(e){e.exports={default:yr,__esModule:!0}}))),br="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window);function _r(e){return je(e)}function wr(e,t,n){var r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}var Sr=br&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame)||function(e){return setTimeout(e,17)},kr=br&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame)||function(e){clearTimeout(e)};function Er(e,t){var n=t,r=(e=""+(e||"")).length;return(((t=(t||r)-r)>0?e.repeat?"0".repeat(t):new Array(t+1).join("0"):"")+e).slice(0,n)}var Or=r(i((function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})));x(x.S+x.F*!m,"Object",{defineProperty:k.f});var Tr=c.Object,Ar=function(e,t,n){return Tr.defineProperty(e,t,n)},xr=i((function(e){e.exports={default:Ar,__esModule:!0}}));r(xr);var Rr=r(i((function(e,t){t.__esModule=!0;var n,r=(n=xr)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()}))),Mr=Object.assign,Dr=!Mr||v((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Mr({},e)[n]||Object.keys(Mr({},t)).join("")!=r}))?function(e,t){for(var n=he(e),r=arguments.length,i=1,o=Qe.f,a=Ze.f;r>i;)for(var s,u=C(arguments[i++]),f=o?Q(u).concat(o(u)):Q(u),c=f.length,l=0;c>l;)a.call(u,s=f[l++])&&(n[s]=u[s]);return n}:Mr;x(x.S+x.F,"Object",{assign:Dr});var Lr=c.Object.assign,Pr=r(i((function(e){e.exports={default:Lr,__esModule:!0}})));x(x.S,"Object",{create:oe});var Br=c.Object,Cr=function(e,t){return Br.create(e,t)},Ir=r(i((function(e){e.exports={default:Cr,__esModule:!0}}))),jr=Ir(null);function Nr(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++jr.count);var r=n+"_"+t,i=jr[r];return i||(i=jr[r]=[]),i}function Fr(e,t,n){var r=Ir(null);r.type=t,r.target=e,n&&Pr(r,hn(n)?n:{data:n}),Nr(e,t).forEach((function(t){(t[1]||t[0]).apply(e,[r])}))}function Ur(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments[4];dn(r)&&!i&&(i=r,r=void 0);var o=[n,void 0,r];r&&!i&&(i=function(){Vr(e,t,n,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];n.apply(e,o)}),i&&(o[1]=i),Nr(e,t).push(o)}function Vr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Nr(e,t);if(n||r){var o=-1,a=void 0;return i.find((function(e,t){if((!n||e[0]===n)&&(!r||e[2]))return o=t,a=e[1],!0})),-1!==o&&i.splice(o,1),a}i.length=0}jr.count=0;var zr=function(){function e(t,n){var r=this;if(Or(this,e),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==(void 0===t?"undefined":qt(t)))throw new Error("CusEvent target are not object");this.__target=t,n&&["on","once","off","emit"].forEach((function(e){t[e]=r[e]}))}}return Rr(e,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ur(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vr(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){return Fr(this.__target,e,{data:t}),this}}]),e}(),Gr=br?document.createElement("div"):{},Wr="innerText";"textContent"in Gr&&(Wr="textContent");var qr=Array.prototype;function Hr(e,t){return e.getAttribute(t)}function Kr(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}function Yr(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach((function(t){return e.classList.add(t)}));else{var r=" "+(e.className||"")+" ";n.forEach((function(e){-1===r.indexOf(" "+e+" ")&&(r+=" "+e)})),e.className=r.trim()}}}function Jr(e,t){if(t&&(t=t.trim())){var n=t.split(/\s+/);if(e.classList)n.forEach((function(t){return e.classList.remove(t)}));else{var r=" "+e.className+" ";n.forEach((function(e){for(var t=" "+e+" ";-1!==r.indexOf(t);)r=r.replace(t," ")})),e.className=r.trim()}}}function Xr(e,t){return new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e.className)}t.supportsPassive=!1;try{var $r=Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0}});br&&window.addEventListener("test",null,$r)}catch(e){console.error(e)}function Qr(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==o&&!yn(o)&&t.supportsPassive&&(o={passive:!0}),i){var a=Vr(e,n+"_once",r);a&&(r=a)}e.removeEventListener(n,r,o)}function Zr(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(void 0!==o&&!yn(o)&&t.supportsPassive&&(o={passive:!0}),i){var a=r;r=function(){for(var t=arguments.length,s=Array(t),u=0;u<t;u++)s[u]=arguments[u];a.apply(this,s),Qr(e,n,r,i,o)},Ur(e,n+"_once",a,r)}e.addEventListener(n,r,o)}function ei(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==o&&!yn(o)&&t.supportsPassive&&(o={passive:!0});var a=function(t){var r=ai(t.target||t.srcElement,e,!0),o=ii(n,e,!0),a=void 0;o.find?a=o.find((function(e){return r.find((function(t){return e===t}))})):o.forEach((function(e){return!a&&r.forEach((function(t){a||e!==t||(a=t)}))})),a&&i.apply(a,arguments)};Ur(e,r+"_delegate_"+n,i,a),e.addEventListener(r,a,o)}function ti(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];void 0!==o&&!yn(o)&&t.supportsPassive&&(o={passive:!0});var a=Vr(e,r+"_delegate_"+n,i);a&&e.removeEventListener(r,a,o)}function ni(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}function ri(e,t,n){if(hn(t))for(var r in t)ri(e,r,t[r]);else e.style[t]=n}function ii(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],r=t.querySelectorAll(e);return n?je(r):r}function oi(e){e.parentNode.removeChild(e)}function ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],r=arguments[3],i=[];for(n&&i.push(e);e&&e.parentNode!==t;)(e=e.parentNode)&&i.push(e);return r&&i.push(t),i}var si=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;Or(this,e);var r=this;r.selector=t;var i=void 0;t&&t.constructor===NodeList?i=_r(t):ln(t)?i=t:mn(t)?0===t.indexOf("<")?(Gr.innerHTML=t,i=ii("*",Gr,!0)):i=ii(t,n,!0):i=[t],Pr(r,i),r.length=i.length}return Rr(e,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return qr.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return qr.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ui(qr.splice.apply(this,t))}},{key:"find",value:function(e){var t=[];this.each((function(n){t=t.concat(ii(e,n,!0))}));var n=ui(t);return n.parent=this,n.selector=e,n}},{key:"append",value:function(e){var t=ui(e),n=this[0];return t.each((function(e){return n.appendChild(e)})),this}},{key:"appendTo",value:function(e){return ui(e).append(this),this}},{key:"text",value:function(e){return 0===arguments.length?this[0][Wr]:this.each((function(t){t[Wr]=e}))}},{key:"html",value:function(e){return 0===arguments.length?this[0].innerHTML:this.each((function(t){t.innerHTML=e}))}},{key:"attr",value:function(e,t){return 1===arguments.length?Hr(this[0],e):this.each((function(n){return Kr(n,e,t)}))}},{key:"data",value:function(e,t){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[e]:this.each((function(n){(n.dataset||(n.dataset={}))[e]=t}))}},{key:"css",value:function(e,t){return 1!==arguments.length||hn(e)?this.each((function(n){return ri(n,e,t)})):ni(this[0],e)}},{key:"addClass",value:function(e){return this.each((function(t){return Yr(t,e)}))}},{key:"removeClass",value:function(e){return this.each((function(t){return Jr(t,e)}))}},{key:"hasClass",value:function(e){return Xr(this[0],e)}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each((function(i){return Zr(i,e,t,n,r)}))}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each((function(i){return Qr(i,e,t,n,r)}))}},{key:"delegate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each((function(i){return ei(i,e,t,n,r)}))}},{key:"undelegate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.each((function(i){return ti(i,e,t,n,r)}))}},{key:"remove",value:function(){return this.each((function(e){return oi(e)}))}}]),e}();function ui(e,t){return e.constructor===si?e:new si(e,t)}function fi(e,t){if(!mn(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+(void 0===e?"undefined":qt(e)));return mn(t)?"["+(e=ci.FORCE_GLOBAL_TAG?ci.GLOBAL_TAG:e||ci.GLOBAL_TAG)+"] > "+t:"["+ci.GLOBAL_TAG+"] > "+e}var ci=function(){function e(){Or(this,e)}return Rr(e,null,[{key:"error",value:function(t,n){e.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,fi(t,n))}},{key:"info",value:function(t,n){e.ENABLE_INFO&&(console.info||console.log).call(console,fi(t,n))}},{key:"warn",value:function(t,n){e.ENABLE_WARN&&(console.warn||console.log).call(console,fi(t,n))}},{key:"debug",value:function(t,n){e.ENABLE_DEBUG&&(console.debug||console.log).call(console,fi(t,n))}},{key:"verbose",value:function(t,n){e.ENABLE_VERBOSE&&console.log(fi(t,n))}}]),e}();ci.GLOBAL_TAG="chimee",ci.FORCE_GLOBAL_TAG=!1,ci.ENABLE_ERROR=!0,ci.ENABLE_INFO=!0,ci.ENABLE_WARN=!0,ci.ENABLE_DEBUG=!0,ci.ENABLE_VERBOSE=!0;var li=i((function(e,t){!function(n,r){var i="model",o="name",a="type",s="vendor",u="version",f="mobile",c="tablet",l={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var n,r,i,o,a,s,u=0;u<t.length&&!a;){var f=t[u],c=t[u+1];for(n=r=0;n<f.length&&!a;)if(a=f[n++].exec(e))for(i=0;i<c.length;i++)s=a[++r],"object"==typeof(o=c[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(l.has(t[n][r],e))return"?"===n?void 0:n}else if(l.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,u],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[o,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[o,u],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],u],[/(QQ)\/([\d\.]+)/i],[o,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[o,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,u],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[u,d.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",l.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",l.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",l.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,s,[a,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[s,"Apple"],[a,c]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,i,[a,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[i,[s,"Amazon"],[a,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[i,d.str,h.device.amazon.model],[s,"Amazon"],[a,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,s,[a,f]],[/\((ip[honed|\s\w*]+);/i],[i,[s,"Apple"],[a,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,i,[a,f]],[/\(bb10;\s(\w+)/i],[i,[s,"BlackBerry"],[a,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[s,"Asus"],[a,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[i,"Xperia Tablet"],[a,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[i,[s,"Sony"],[a,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,i,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,d.str,h.device.sprint.vendor],[i,d.str,h.device.sprint.model],[a,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,i,[a,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[i,/_/g," "],[a,f]],[/(nexus\s9)/i],[i,[s,"HTC"],[a,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[i,[s,"Huawei"],[a,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[s,i,[a,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[s,"Microsoft"],[a,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[s,"Motorola"],[a,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[s,"Motorola"],[a,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[s,l.trim],[i,l.trim],[a,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[s,"Samsung"],[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[s,"Sharp"],[a,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],i,[a,c]],[/smart-tv.+(samsung)/i],[s,[a,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],i,[a,f]],[/sie-(\w+)*/i],[i,[s,"Siemens"],[a,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],i,[a,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[s,"Acer"],[a,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[i,[s,"LG"],[a,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],i,[a,c]],[/(lg) netcast\.tv/i],[s,i,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[s,"LG"],[a,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[s,"Lenovo"],[a,c]],[/linux;.+((jolla));/i],[s,i,[a,f]],[/((pebble))app\/[\d\.]+\s/i],[s,i,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,i,[a,f]],[/crkey/i],[[i,"Chromecast"],[s,"Google"]],[/android.+;\s(glass)\s\d/i],[i,[s,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)\s/i],[i,[s,"Google"],[a,c]],[/android.+;\s(pixel xl|pixel)\s/i],[i,[s,"Google"],[a,f]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[i,/_/g," "],[s,"Xiaomi"],[a,f]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[i,/_/g," "],[s,"Xiaomi"],[a,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[s,"Meizu"],[a,c]],[/android.+a000(1)\s+build/i],[i,[s,"OnePlus"],[a,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[i,[s,"RCA"],[a,c]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[i,[s,"Dell"],[a,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[i,[s,"Verizon"],[a,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[s,"Barnes & Noble"],i,[a,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[i,[s,"NuVision"],[a,c]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[s,"ZTE"],i,[a,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[i,[s,"Swiss"],[a,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[i,[s,"Swiss"],[a,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[i,[s,"Zeki"],[a,c]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[s,"Dragon Touch"],i,[a,c]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[i,[s,"Insignia"],[a,c]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[i,[s,"NextBook"],[a,c]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[s,"Voice"],i,[a,f]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[s,"LvTel"],i,[a,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[i,[s,"Envizen"],[a,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[s,i,[a,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[i,[s,"MachSpeed"],[a,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[s,i,[a,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[i,[s,"Rotor"],[a,c]],[/android.+(KS(.+))\s+build/i],[i,[s,"Amazon"],[a,c]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[s,i,[a,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,l.lowerize],s,i],[/(android.+)[;\/].+build/i],[i,[s,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,u],[/rv\:([\w\.]+).*(gecko)/i],[u,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[u,d.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[u,d.str,h.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],u],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[o,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[o,u],[/(haiku)\s(\w+)/i],[o,u],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,u]]},v=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof v))return new v(e,t).getResult();var r=e||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),i=t?l.extend(p,t):p;return this.getBrowser=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,i.browser),e.major=l.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,r,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(e,r,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,r,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.17",v.BROWSER={NAME:o,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:i,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:o,VERSION:u},v.OS={NAME:o,VERSION:u},e.exports&&(t=e.exports=v),t.UAParser=v;var m=n&&(n.jQuery||n.Zepto);if(void 0!==m){var y=new v;m.ua=y.getResult(),m.ua.get=function(){return y.getUA()},m.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"==typeof window?window:n)}));li.UAParser,t.Log=ci,t.UAParser=li,t.genTraversalHandler=_n,t.deepClone=function(e){if(gn(e))throw new TypeError("deepClone only accept non primitive type");return wn(e)},t.deepAssign=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var r=t.length-1;r>-1;r--)if(gn(t[r]))throw new TypeError("deepAssign only accept non primitive type");var i=t.shift();return t.forEach((function(e){return wn(e,i)})),i},t.camelize=Sn,t.hypenate=function(e){return Sn(e).replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},t.bind=function(e,t){return e.bind?e.bind(t):e.apply?function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(t,r)}:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.call.apply(e,[t].concat(Ne(r)))}},t.uuid=function(){return kn()+kn()+"-"+kn()+"-"+kn()+"-"+kn()+"-"+kn()+kn()+kn()},t.S4=kn,t.rand=function(e){for(var t="";t.length<e;)t+=kn();return t.slice(0,e)},t.getDeepProperty=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.throwError,i=void 0!==r&&r,o=n.backup;if(mn(t)&&(t=t.split(".")),!ln(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],s=e,u=0,f=t.length;u<f;u++){var c=t[u];if(cn(s)){if(i)throw new Error("obj"+(a.length>0?"."+a.join("."):" itself")+" is "+s);return o}s=s[c],a.push(c)}return s},t.defined=function(e){return void 0!==e},t.isVoid=cn,t.isArray=ln,t.isFunction=dn,t.isObject=hn,t.isNumber=pn,t.isNumeric=function(e){return!ln(e)&&e-fn(e)+1>=0},t.isInteger=function(e){return Xt(e)},t.isEmpty=function(e){return ln(e)?0===e.length:hn(e)?0===Kt(e).length:!e},t.isEvent=function(e){return e instanceof Event||(e&&e.originalEvent)instanceof Event},t.isBlob=vn,t.isFile=function(e){return vn(e)&&mn(e.name)},t.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},t.isString=mn,t.isBoolean=yn,t.isPromise=function(e){return!!e&&("object"===(void 0===e?"undefined":qt(e))||"function"==typeof e)&&"function"==typeof e.then},t.isPrimitive=gn,t.isUrl=function(e){return mn(e)&&!!e.match(/^((https?|ftp|rtsp|mms):\/\/)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6}|localhost)(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i)},t.isNode=bn,t.isElement=function(e){return!!("object"===("undefined"==typeof HTMLElement?"undefined":qt(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":qt(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)},t.isChildNode=function(e,t){return!(!bn(e)||!bn(t))&&t.parentNode===e},t.isPosterityNode=function(e,t){if(!bn(e)||!bn(t))return!1;for(;t.parentNode;)if((t=t.parentNode)===e)return!0;return!1},t.isHTMLString=function(e){return/<[^>]+?>/.test(e)},t.isError=function(e){return e instanceof Error},t.isRegExp=function(e){return e instanceof RegExp},t.inBrowser=br,t.makeArray=_r,t.transObjectAttrIntoArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return+e-+t};return Kt(e).sort(t).reduce((function(t,n){return t.concat(e[n])}),[])},t.runRejectableQueue=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new gr((function(t,r){!function i(o){if(!(o>=e.length)){var a=dn(e[o])?e[o].apply(e,Ne(n)):e[o];return!1===a?r("stop"):gr.resolve(a).then((function(){return i(o+1)})).catch((function(e){return r(e||"stop")}))}t()}(0)}))},t.runStoppableQueue=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function t(r){return r>=e.length||!1!==(dn(e[r])?e[r].apply(e,Ne(n)):e[r])&&t(++r)};return i(0)},t.decodeUTF8=function(e){for(var t=[],n=e,r=0,i=e.length;r<i;)if(n[r]<128)t.push(String.fromCharCode(n[r])),++r;else{if(n[r]<192);else if(n[r]<224){if(wr(n,r,1)){var o=(31&n[r])<<6|63&n[r+1];if(o>=128){t.push(String.fromCharCode(65535&o)),r+=2;continue}}}else if(n[r]<240){if(wr(n,r,2)){var a=(15&n[r])<<12|(63&n[r+1])<<6|63&n[r+2];if(a>=2048&&55296!=(63488&a)){t.push(String.fromCharCode(65535&a)),r+=3;continue}}}else if(n[r]<248&&wr(n,r,3)){var s=(7&n[r])<<18|(63&n[r+1])<<12|(63&n[r+2])<<6|63&n[r+3];if(s>65536&&s<1114112){s-=65536,t.push(String.fromCharCode(s>>>10|55296)),t.push(String.fromCharCode(1023&s|56320)),r+=4;continue}}t.push(String.fromCharCode(65533)),++r}return t.join("")},t.debounce=function(e,t,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=function u(){var f=new Date-a;f<t&&f>=0?r=setTimeout(u,t-f):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=new Date;var f=n&&!r;return r||(r=setTimeout(u,t)),f&&(s=e.apply(o,i),o=i=null),s}},t.throttle=function(e,t,n,r){var i=void 0,o=void 0,a=void 0,s=null,u=0;n||(n={});var f=function(){u=!1===n.leading?0:new Date-0,s=null,a=e.apply(i,o),s||(i=o=null)};return t=t||0,function(){var c=new Date;u||!1!==n.leading||(u=c);var l=t-(c-u);return i=r||this,o=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),u=c,a=e.apply(i,o),s||(i=o=null)):s||!1===n.trailing||(s=setTimeout(f,l)),a}},t.raf=Sr,t.caf=kr,t.strRepeat=Er,t.formatTime=function(e){var t=Math.floor(e/3600);e=Math.floor(e%3600);var n=Er(Math.floor(e/60),2),r=Er(e=Math.floor(e%60),2);return t>=1?t+":"+n+":"+r:n+":"+r},t.appendCSS=function(e){var t=document,n=t.querySelector("style");if(!n){n=t.createElement("style");var r=t.querySelector("head");r&&r.appendChild(n)}return n.appendChild(t.createTextNode(e)),n},t.formatDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss.i",n=e.getFullYear().toString(),r={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),i:e.getMilliseconds()};t=t.replace(/(y+)/gi,(function(e,t){return n.substr(4-Math.min(4,t.length))}));var i=function(e){t=t.replace(new RegExp("("+e+"+)","g"),(function(t,n){return(r[e]<10&&n.length>1?"0":"")+r[e]}))};for(var o in r)i(o);return t},t.getLocalStorage=function(e){try{return window.localStorage.getItem(e)}catch(n){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return ln(t)?unescape(t[2]):""}catch(e){return""}}},t.setLocalStorage=function(e,t){try{window.localStorage.setItem(e,t)}catch(r){var n=new Date;n.setTime(n.getTime()+2592e7);try{document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()+";path=/;"}catch(e){console.error(e)}}},t.emitEventCache=Fr,t.addEventCache=Ur,t.removeEventCache=Vr,t.CustEvent=zr,t.getAttr=Hr,t.setAttr=Kr,t.addClassName=Yr,t.removeClassName=Jr,t.hasClassName=Xr,t.removeEvent=Qr,t.addEvent=Zr,t.addDelegate=ei,t.removeDelegate=ti,t.getStyle=ni,t.setStyle=ri,t.query=ii,t.removeEl=oi,t.findParents=ai,t.NodeWrap=si,t.$=ui,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(t,n(34))},function(e,t,n){e.exports=n(13)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(14)),o=c(n(15)),a=c(n(33)),s=n(11),u=c(n(35)),f=n(2);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(t){l(this,e),this._resetForNewSession(t),this._resetForNewInterval()}return r(e,[{key:"_resetForNewSession",value:function(e){this.currentPlaybackSpeed=1,this.lastDownloadedBytes=0,this.playUrl=e,this.domain=new URL(e).hostname,this.playStartTimestampMillis=(new Date).getTime(),this.lastVideoBuffered={start:-1e9,end:-1e9}}},{key:"_resetForNewInterval",value:function(){this.currentPlaybackSpeedTimestamp=(new Date).getTime(),this.playbackSpeedStat={"0.75x":0,"1.25x":0,"1.5x":0},this.statTimestampMillis=(new Date).getTime(),this.bufferingCount=0,this.bufferingDurationMillis=0,this.bufferingStartTimestampMillis=this.bufferingStartTimestampMillis?(new Date).getTime():null,this.downloadedBytes=0,this.audioBufferedMillis=0,this.videoBufferedMillis=0,this.demuxedDurationSec=0,this.excessiveDataDroppedSec=0,this.blockCountWithBuffer=0,this.bufferDuringBlockSum=0}},{key:"videoBufferedUpdated",value:function(e){if(0!==e.length){var t=e.start(e.length-1),n=e.end(e.length-1);t>this.lastVideoBuffered.end+.001?(this.demuxedDurationSec+=n-t,this.lastVideoBuffered={start:t,end:n}):(this.demuxedDurationSec+=Math.max(0,n-this.lastVideoBuffered.end),this.lastVideoBuffered.end=n)}}},{key:"playbackSpeedChanged",value:function(e){var t=(new Date).getTime()-this.currentPlaybackSpeedTimestamp,n=Math.abs(e-.75)<.001?"0.75x":Math.abs(e-1.25)<.001?"1.25x":Math.abs(e-1.5)<.001?"1.5x":null;n&&(this.playbackSpeedStat[n]+=t,this.currentPlaybackSpeedTimestamp=(new Date).getTime())}},{key:"bufferingStarted",value:function(e){++this.bufferingCount,this.bufferingStartTimestampMillis=(new Date).getTime(),e>.3&&(this.bufferDuringBlockSum+=e,this.blockCountWithBuffer++)}},{key:"bufferingEnded",value:function(){var e=(new Date).getTime();null!=this.bufferingStartTimestampMillis&&(this.bufferingDurationMillis+=e-this.bufferingStartTimestampMillis),this.bufferingStartTimestampMillis=null}},{key:"updateDownloadedBytes",value:function(e){var t=e-this.lastDownloadedBytes;this.downloadedBytes+=t,this.lastDownloadedBytes=e}},{key:"setAudioBufferedSec",value:function(e){this.audioBufferedMillis=Math.round(1e3*e)}},{key:"setVideoBufferedSec",value:function(e){this.videoBufferedMillis=Math.round(1e3*e)}},{key:"excessiveDataDropped",value:function(e){this.excessiveDataDroppedSec+=e}},{key:"buildAndStartNewInterval",value:function(){var e=(new Date).getTime(),t=null==this.bufferingStartTimestampMillis?0:e-this.bufferingStartTimestampMillis,n=(this.bufferingStartTimestampMillis,{play_url:this.playUrl,domain:this.domain,play_start_time:this.playStartTimestampMillis,tick_start:this.statTimestampMillis,tick_duration:e-this.statTimestampMillis,block_count:this.bufferingCount,buffer_time:this.bufferingDurationMillis+t,kbytes_received:this.downloadedBytes>>10,played_video_duration:e-this.statTimestampMillis-(this.bufferingDurationMillis+t),demuxed_video_duration:Math.round(1e3*this.demuxedDurationSec),dropped_packet_duration:Math.round(1e3*this.excessiveDataDroppedSec),a_buf_len:this.audioBufferedMillis,v_buf_len:this.videoBufferedMillis,speed_chg_metric:this.playbackSpeedStat,block_count_with_buffer:this.blockCountWithBuffer,buffer_during_block:this.blockCountWithBuffer>0?Math.round(this.bufferDuringBlockSum/this.blockCountWithBuffer*1e3):0});return this._resetForNewInterval(),n}}]),e}(),h=function(e){function t(e,n){l(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.tag="flv-player",r.video=e,r.box="flv",r.timer=null,r.seekTimer=null,r.checkBufferTimer=null,r.realtimeBeaconTimer=null,r.config=(0,s.deepAssign)({},a.default,n),r.requestSetTime=!1,r.throttle=null,r.bindEvents(),r.attachMedia(),r.initLogger(),console.log("kernel",t.version),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"isSupport",value:function(){var e=(new s.UAParser).getBrowser();return!("Safari"===e.name&&parseInt(e.major)<10||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.640020,mp4a.40.2"'))}},{key:"version",get:function(){return"1.4.11"}}]),r(t,[{key:"initLogger",value:function(){var e=this;this.logger=new u.default,this.logger.on("performance",(function(t){e.emit("performance",t.data)}))}},{key:"internalPropertyHandle",value:function(){if(Object.getOwnPropertyDescriptor){var e=this,t=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");Object.defineProperty(this.video,"currentTime",{get:function(){return t.get.call(e.video)},set:function(n){if(e.currentTimeLock)return t.set.call(e.video,n);throw new Error("can not set currentTime by youself")}})}}},{key:"bindEvents",value:function(){this.video&&(this._onVideoCanplay=this._onVideoCanplay.bind(this),this._onVideoWaiting=this._onVideoWaiting.bind(this),this._onVideoPlaying=this._onVideoPlaying.bind(this),this._onVideoTimeupdate=this._onVideoTimeupdate.bind(this),this.video.addEventListener("canplay",this._onVideoCanplay),this.video.addEventListener("waiting",this._onVideoWaiting),this.video.addEventListener("playing",this._onVideoPlaying),this.video.addEventListener("timeupdate",this._onVideoTimeupdate),this._lastBufferd=null,this.checkBufferTimer=setInterval(this._checkBuffer.bind(this),200))}},{key:"unbindMediaSourceEvent",value:function(e){e.off("error"),e.off("bufferFull"),e.off("updateend"),e.off("player-event")}},{key:"attachMedia",value:function(){var e=this;this.mediaSource=new i.default(this.video,this.config),this.mediaSource.on("error",(function(t){e.emit("error",t.data),e.transmuxer&&e.transmuxer.pause()})),this.mediaSource.on("bufferFull",(function(){e.pauseTransmuxer()})),this.mediaSource.on("updateend",(function(){e.onmseUpdateEnd()})),this.mediaSource.on("player-event",(function(t){e.logger.record(t.data)}))}},{key:"load",value:function(e){e&&(this.config.src=e),this.realtimeBeaconBuilder=new d(this.config.src),this.realtimeBeaconTimer=setInterval(this._sendRealtimeBeacon.bind(this),1e4),this.transmuxer=new o.default(this.mediaSource,this.config,this.globalEvent),this.transmuxerEvent(this.transmuxer),this.transmuxer.loadSource()}},{key:"unbindTransmuxerEvent",value:function(e){e.off("mediaSegment"),e.off("mediaSegmentInit"),e.off("error"),e.off("end"),e.off("heartbeat"),e.off("performance"),e.off("mediaInfo"),e.off("player-event")}},{key:"transmuxerEvent",value:function(e){var t=this,n=this.mediaSource;e.on("mediaSegment",(function(e){n.emit("mediaSegment",e.data)})),e.on("mediaSegmentInit",(function(e){n.emit("mediaSegmentInit",e.data)})),e.on("error",(function(r){t.emit("error",r.data),e.pause(),n.pause()})),e.on("end",(function(e){n.endOfStream()})),e.on("heartbeat",(function(e){t.emit("heartbeat",e.data),t.realtimeBeaconBuilder.updateDownloadedBytes(e.data.totalReceive)})),e.on("performance",(function(e){var n=e.data,r=n.type,i=n.value;return"first-flv-to-mp4"===r?(t.firstFlvToMp4=t.firstFlvToMp4||0,void(t.firstFlvToMp4+=i)):"receive-first-package-duration"===r?(t.receiveFirstPAckageDuration=t.receiveFirstPAckageDuration||0,void(t.receiveFirstPAckageDuration+=i)):void("first-flv-package-duration"===r&&(t.firstFlvPackageDuration=t.firstFlvPackageDuration||0,t.firstFlvPackageDuration+=i))})),e.on("mediaInfo",(function(e){t.mediaInfo?t.emit("mediaInfo",e.data):(t.mediaInfo=e,t.emit("mediaInfo",e.data),n.init(e.data),t.video.src=URL.createObjectURL(n.mediaSource),t.video.addEventListener("seeking",t._throttle.call(t)))})),e.on("player-event",(function(e){t.logger.record(e.data)}))}},{key:"_throttle",value:function(){return this.throttle=(0,s.throttle)(this._seek.bind(this),200,{leading:!1}),this.throttle}},{key:"isTimeinBuffered",value:function(e){for(var t=this.video.buffered,n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(e>=r&&e<i)return!0}return!1}},{key:"_getBufferEnd",value:function(e,t){for(var n=0;n<e.length;n++){var r=e.start(n),i=e.end(n);if(r<=t&&t<i)return i}}},{key:"getCurrentBufferEnd",value:function(){return this._getBufferEnd(this.video.buffered,this.video.currentTime)}},{key:"_seek",value:function(e){var t=this;if(this.transmuxer){this.currentTimeLock=!0;var n=(0,s.isNumber)(e)&&!isNaN(e)?e:this.video.currentTime;if(this.requestSetTime)return this.requestSetTime=!1,void(this.currentTimeLock=!1);if(this.isTimeinBuffered(n)){if(this.config.alwaysSeekKeyframe){var r=this.transmuxer.getNearestKeyframe(Math.floor(1e3*n));r&&(this.requestSetTime=!0,this.video.currentTime=r.keyframetime/1e3)}}else{s.Log.verbose(this.tag,"do seek"),this.transmuxer.pause();var i=this.transmuxer.getNearestKeyframe(Math.floor(1e3*n));n=i.keyframetime/1e3,this.seekTimer=setTimeout((function(){t.mediaSource.seek(n),t.transmuxer.seek(i)}),100),this.requestSetTime=!0,this.video.currentTime=n,window.clearInterval(this.timer),this.timer=null}return this.currentTimeLock=!1,n}}},{key:"onmseUpdateEnd",value:function(){this.mediaSource.sourceBuffer.video&&this.realtimeBeaconBuilder.videoBufferedUpdated(this.mediaSource.sourceBuffer.video.buffered),this.config.isLive||this.getCurrentBufferEnd()>=this.video.currentTime+this.config.lazyLoadMaxDuration&&null===this.timer&&(s.Log.verbose(this.tag,"Maximum buffering duration exceeded, suspend transmuxing task"),this.pauseTransmuxer())}},{key:"heartbeat",value:function(){for(var e=this.video.currentTime,t=this.video.buffered,n=!1,r=0;r<t.length;r++){var i=t.start(r),o=t.end(r);if(e>=i&&e<o){e>=o-this.config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this.timer),this.timer=null,s.Log.verbose(this.tag,"Continue loading from paused position"),this.transmuxer.resume(),this.mediaSource.resume())}},{key:"_checkBuffer",value:function(){var e=this,t=.001;if(this.config.isLive){var n=this.getCurrentBufferEnd();if(void 0===n){var r=this.video.buffered,i=r.length;if(!(i>0&&r.start(i-1)>this.video.currentTime+t))return;s.Log.verbose("currentTime being in no-data GaP detected. Jumping to "+r.start(i-1)),this.video.currentTime=r.start(i-1),n=r.end(i-1)}var o=n-this.video.currentTime;if(null!=this._lastBufferd){var a=function(t){s.Log.verbose("Change playback rate from "+e.video.playbackRate+" to "+t+", buffered:"+o),e.video.playbackRate=t,e.realtimeBeaconBuilder.playbackSpeedChanged(t)};this.video.playbackRate<1-t?o>5-t&&a(1):this.video.playbackRate>1+t&&o<5+t&&a(1)}this._lastBufferd=o}}},{key:"_sendRealtimeBeacon",value:function(){if(this.mediaSource.sourceBuffer.audio){var e=this._getBufferEnd(this.mediaSource.sourceBuffer.audio.buffered,this.video.currentTime);this.realtimeBeaconBuilder.setAudioBufferedSec(e-this.video.currentTime)}if(this.mediaSource.sourceBuffer.video){var t=this._getBufferEnd(this.mediaSource.sourceBuffer.video.buffered,this.video.currentTime);this.realtimeBeaconBuilder.setVideoBufferedSec(t-this.video.currentTime)}var n=this.realtimeBeaconBuilder.buildAndStartNewInterval();this.emit("realtimeBeacon",n)}},{key:"_onVideoCanplay",value:function(){this.logger.record({type:f.PLAYER_EVENTS.CANPLAY,ts:Date.now()}),this.config.isLive&&this.video.play(),this.config.lockInternalProperty&&this.internalPropertyHandle()}},{key:"_onVideoWaiting",value:function(){if(this.video&&!this.video.seeking){var e=0,t=this.video.buffered;t.length>0&&(e=this.video.buffered.end(t.length-1)-this.video.currentTime),this.realtimeBeaconBuilder.bufferingStarted(e)}}},{key:"_onVideoPlaying",value:function(){for(var e=0,t=this.video.buffered,n=0;n<t.length;n++)if(t.start(n)-.1<=this.video.currentTime&&t.end(n)>=this.video.currentTime){e=t.end(n)-this.video.currentTime;break}this.logger.record({type:f.PLAYER_EVENTS.PLAYING,buffered:e,ts:Date.now()}),this.realtimeBeaconBuilder.bufferingEnded()}},{key:"_onVideoTimeupdate",value:function(){console.log("time update"),this.video.removeEventListener("timeupdate",this._onVideoTimeupdate),this.logger.record({type:f.PLAYER_EVENTS.TIMEUPDATE,ts:Date.now()})}},{key:"pauseTransmuxer",value:function(){this.transmuxer.pause(),this.mediaSource.pause(),this.timer||(this.timer=setInterval(this.heartbeat.bind(this),1e3))}},{key:"resume",value:function(){this._seek(0)}},{key:"destroy",value:function(){window.clearInterval(this.timer),window.clearInterval(this.seekTimer),window.clearInterval(this.checkBufferTimer),this.realtimeBeaconTimer&&(window.clearInterval(this.realtimeBeaconTimer),this._sendRealtimeBeacon(),this.realtimeBeaconTimer=null),this.video.removeEventListener("canplay",this._onVideoCanplay),this.video.removeEventListener("seeking",this.throttle),this.video.removeEventListener("waiting",this._onVideoWaiting),this.video.removeEventListener("playing",this._onVideoPlaying),this.video.removeEventListener("timeupdate",this._onVideoTimeupdate),this.video&&(URL.revokeObjectURL(this.video.src),this.video.src="",this.video.removeAttribute("src"),this.transmuxer&&(this.unbindTransmuxerEvent(this.transmuxer),this.transmuxer.pause(),this.transmuxer.destroy(),this.transmuxer=null),this.mediaSource&&(this.unbindMediaSourceEvent(this.mediaSource),this.mediaSource.destroy(),this.mediaSource=null)),this.logger.off("performance"),this.logger=null}},{key:"seek",value:function(e){return this._seek(e)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){return this.video.pause()}},{key:"refresh",value:function(){this.transmuxer&&this.mediaSource?this._seek(0):s.Log.verbose(this.tag,"transmuxer & mediaSource not ready")}},{key:"stopLoad",value:function(){this.transmuxer&&this.transmuxer.pause(),this.mediaSource&&this.mediaSource.pause(),this.realtimeBeaconTimer&&(window.clearInterval(this.realtimeBeaconTimer),this._sendRealtimeBeacon(),this.realtimeBeaconTimer=null)}}]),t}(s.CustEvent);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=n(4),s=(r=a)&&r.__esModule?r:{default:r},u=n(1),f=n(2),c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.video=e,r.config=n,r.tag="mse-controller",r.e={onSourceOpen:r.onSourceOpen.bind(r),onSourceEnded:r.onSourceEnded.bind(r),onSourceClose:r.onSourceClose.bind(r),onSourceBufferError:r.onSourceBufferError.bind(r)},r.hasVideo=!0,r.hasAudio=!0,r.removeRangesList={video:[],audio:[]},r.removeBucketing=!1,r.timer={video:null,audio:null},r.queue={video:[],audio:[]},r.sourceBuffer={video:null,audio:null},r.mimeCodec={video:null,audio:null},r.sourceBufferEvent(),r.complete=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"init",value:function(e){if(this.emit("player-event",{type:f.PLAYER_EVENTS.MEDIA_INFO,ts:Date.now()}),this.mediaSource)return s.default.Error(this.tag,"MediaSource has been attached to an HTMLMediaElement!"),void this.emit("error",{errno:u.ERRORNO.MEDIASOURCE_ERROR,errmsg:"MediaSource has been attached to an HTMLMediaElement!"});e.hasAudio?this.mimeCodec.audio='audio/mp4; codecs="'+e.audioCodec+'"':this.hasAudio=!1,e.hasVideo?this.mimeCodec.video='video/mp4; codecs="'+e.videoCodec+'"':this.hasVideo=!1;var t=this.mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose)}},{key:"onSourceOpen",value:function(){s.default.verbose(this.tag,"MediaSource onSourceOpen"),this.mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this.hasAudio&&this.addSourceBuffer("audio"),this.hasVideo&&this.addSourceBuffer("video"),this.hasQueueList()&&this.doUpdate(),this.emit("source_open")}},{key:"addSourceBuffer",value:function(e){var t=this;this.sourceBuffer[e]=this.mediaSource.addSourceBuffer(this.mimeCodec[e]),s.default.verbose(this.tag,"add sourcebuffer "+e);var n=this.sourceBuffer[e];n.addEventListener("error",this.e.onSourceBufferError),n.addEventListener("abort",(function(){return s.default.verbose(t.tag,"sourceBuffer: abort")})),n.addEventListener("updateend",(function(){t.sourceBuffer&&(t.hasRemoveList()?(t.removeRangesList.video.length&&t.cleanRangesList("video"),t.removeRangesList.audio.length&&t.cleanRangesList("audio")):t.hasQueueList()?t.doUpdate():t.complete&&!t.sourceBuffer[e].updating&&t.endOfStream(),t.emit("updateend"))}))}},{key:"hasRemoveList",value:function(){return this.removeRangesList.video.length||this.removeRangesList.audio.length}},{key:"hasQueueList",value:function(){return this.queue.video.length||this.queue.audio.length}},{key:"doUpdate",value:function(){for(var e in this.queue)if(this.queue[e].length>0&&!this.sourceBuffer[e].updating){var t=this.queue[e].shift();this.appendBuffer(t,e)}}},{key:"sourceBufferEvent",value:function(){var e=this;this.on("mediaSegment",(function(t){var n=t.data,r=n.type;e.emit("player-event",{type:f.PLAYER_EVENTS.MEDIA_SEGMENT,byteLength:n.data.byteLength,ts:Date.now()}),e.needCleanupSourceBuffer(r)&&e.doCleanupSourceBuffer(r),e.queue[r].push(n.data),e.sourceBuffer[r]&&!e.hasRemoveList()&&e.doUpdate()})),this.on("mediaSegmentInit",(function(t){e.emit("player-event",{type:f.PLAYER_EVENTS.MEDIA_SEGMENT_INIT,ts:Date.now()});var n=t.data,r=n.type;e.queue[r].push(n.data)}))}},{key:"needCleanupSourceBuffer",value:function(e){var t=this.video.currentTime,n=this.video.buffered;return n.length>=1&&t-n.start(0)>=this.config.autoCleanupMaxBackwardDuration}},{key:"doCleanupSourceBuffer",value:function(e){for(var t=this.video.currentTime,n=this.sourceBuffer[e].buffered,r=!1,i=0;i<n.length;i++){var o=n.start(i),a=n.end(i);if(o<=t&&t<a+3&&t-o>=this.config.autoCleanupMaxBackwardDuration){r=!0;var s=t-this.config.autoCleanupMinBackwardDuration;this.removeRangesList[e].push({start:o,end:s})}}r&&!this.sourceBuffer[e].updating&&this.cleanRangesList(e)}},{key:"cleanRangesList",value:function(e){if(!this.sourceBuffer[e].updating)for(var t=this.sourceBuffer[e];this.removeRangesList[e].length&&!t.updating;){var n=this.removeRangesList[e].shift();t.remove(n.start,n.end)}}},{key:"appendBuffer",value:function(e,t){if(this.sourceBuffer[t])try{this.sourceBuffer[t].appendBuffer(e.buffer)}catch(i){var n=this.video.currentTime-3;if(console.log("removeEnd",n),n>0)for(var r in this.sourceBuffer)this.sourceBuffer[r].remove(0,n);this.queue[t].unshift(e),setTimeout(this.doUpdate.bind(this),100),console.error(i)}}},{key:"onSourceEnded",value:function(){s.default.verbose(this.tag,"MediaSource onSourceEnded")}},{key:"onSourceClose",value:function(){s.default.verbose(this.tag,"MediaSource onSourceClose"),this.mediaSource&&null!==this.e&&(this.mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this.mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this.mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"onSourceBufferError",value:function(e){this.emit("error",{errnono:u.ERRORNO.SOURCEBUFFER_ERROR,errmsg:e.message}),s.default.error(this.tag,"SourceBuffer Error: "+e)}},{key:"seek",value:function(){for(var e in this.sourceBuffer){var t=this.sourceBuffer[e];if(t){if("open"===this.mediaSource.readyState)try{t.abort()}catch(e){this.emit("error",{errno:u.ERRORNO.SBABORT_ERROR,errmsg:e}),s.default.error(this.tag,e.message)}this.queue[e]=[];for(var n=0;n<t.buffered.length;n++){var r=t.buffered.start(n),i=t.buffered.end(n);this.removeRangesList[e].push({start:r,end:i})}t.updating||this.cleanRangesList(e)}}}},{key:"resume",value:function(){this.doUpdate()}},{key:"pause",value:function(){}},{key:"endOfStream",value:function(){if(this.mediaSource){var e=this.mediaSource;this.complete=!0;var t=this.sourceBuffer;if(t.video&&t.video.updating||t.audio&&t.audio.updating)return;if("open"===e.readyState)try{e.endOfStream(),this.complete=!1}catch(e){s.default.verbose(this.tag,e),this.emit("error",{errno:u.ERRORNO.ENDOFSTREAM_ERROR,errmsg:e})}}}},{key:"destroy",value:function(){if(this.mediaSource){var e=this.mediaSource;this.queue={video:[],audio:[]},this.sourceBuffer={video:null,audio:null},this.mimeCodec={video:null,audio:null};var t=this.sourceBuffer;this.complete=!1,this.endOfStream(),t&&("closed"!==e.readyState&&(e.removeSourceBuffer(t),t.removeEventListener("error",this.e.onSourceBufferError),t.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)),this.sourceBuffer=null),e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this.mediaSource=null}this.off("mediaSegmentInit"),this.off("mediaSegment")}}]),t}(o.CustEvent);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(5)),o=n(0),a=c(n(21)),s=c(n(7)),u=n(1),f=n(2);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.config=n||{},i.tag="transmuxer",i.loader=null,i.CPU=null,i.keyframePoint=!1,i.w=null,i.config.webWorker&&(i.onWorkMessage=i.onWorkMessage.bind(i),i.w=(0,a.default)(32),i.w.addEventListener("message",i.onWorkMessage),i.w.postMessage(JSON.parse(JSON.stringify({cmd:"init",data:n})))),i.lock=0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"onWorkMessage",value:function(e){this.parseCallback.call(this,e.data)}},{key:"loadSource",value:function(){this.config.webWorker?this.w.postMessage({cmd:"loadSource"}):(this.loader=new i.default(this.config),this.loader.arrivalDataCallback=this.arrivalDataCallback.bind(this),this.loaderBindEvent(this.loader),this.loader.open())}},{key:"loaderBindEvent",value:function(e){var t=this;e.on("end",(function(){t.emit("end")})),e.on("error",(function(e){t.emit("error",e.data)})),e.on("heartbeat",(function(e){t.emit("heartbeat",e.data)})),this.loader.on("player-event",(function(e){t.emit("player-event",e.data)}))}},{key:"loaderUnbindEvent",value:function(e){e.off("end"),e.off("error"),e.off("heartbeat"),e.off("player-event")}},{key:"arrivalDataCallback",value:function(e,t,n){var r=this;return this.CPU||(this.CPU=new s.default(this.config),this.CPU.onInitSegment=this.onRemuxerInitSegmentArrival.bind(this),this.CPU.onMediaSegment=this.onRemuxerMediaSegmentArrival.bind(this),this.CPU.onMediaInfo=this.onMediaInfo.bind(this),this.CPU.onCdnDropFrame=this.onCdnDropFrame.bind(this),this.CPU.on("error",(function(e){r.emit("error",{errno:u.ERRORNO.CODEC_ERROR,errmsg:e.data})}))),void 0!==n&&this.CPU.seek(n),this.emit("player-event",{type:f.PLAYER_EVENTS.MEDIA_DEMUX_FLV,byteLength:e.byteLength,ts:Date.now()}),this.CPU.setflv(e)}},{key:"parseCallback",value:function(e){switch(e.cmd){case"mediaSegmentInit":this.emit("mediaSegmentInit",e.source);break;case"mediaSegment":this.emit("mediaSegment",e.source);break;case"mediainfo":this.mediaInfo=e.source,this.emit("mediaInfo",e.source);break;case"end":this.emit("end");break;case"error":this.emit("error",e.source);break;case"player-event":this.emit("player-event",e.source);break;case"heartbeat":this.emit("heartbeat",e.source);break;case"cdnDropFrame":this.emit("cdnDropFrame",{dropAudio:e.source})}}},{key:"onMediaInfo",value:function(e){this.mediaInfo=e,this.emit("mediaInfo",e)}},{key:"onCdnDropFrame",value:function(e){this.emit("cdnDropFrame",{dropAudio:e})}},{key:"onRemuxerInitSegmentArrival",value:function(e,t){this.emit("mediaSegmentInit",{type:"video",data:e}),t&&this.emit("mediaSegmentInit",{type:"audio",data:t})}},{key:"onRemuxerMediaSegmentArrival",value:function(e,t){this.emit("mediaSegment",{type:e,data:t})}},{key:"getMediaInfo",value:function(){return this.mediaInfo}},{key:"pause",value:function(){this.config.webWorker?this.w.postMessage({cmd:"pause"}):this.loader.pause()}},{key:"resume",value:function(){this.config.webWorker?this.w.postMessage({cmd:"resume"}):this.loader.resume()}},{key:"isSeekable",value:function(){return this.mediaInfo.hasKeyframesIndex}},{key:"seek",value:function(e){if(!this.isSeekable())return this.emit("error",{errno:u.ERRORNO.CANNOT_SEEK,errmsg:"这个flv视频不支持seek"}),!1;this.config.webWorker?this.w.postMessage({cmd:"seek",keyframe:e}):this.loader.seek(e.keyframePoint,!1,e.keyframetime)}},{key:"destroy",value:function(){this.config.webWorker?(this.w.postMessage({cmd:"destroy"}),this.w.removeEventListener("message",this.onWorkMessage),this.w.terminate()):(this.loader&&(this.loaderUnbindEvent(this.loader),this.loader.destroy(),this.loader=null),this.CPU&&(this.CPU.off("error"),this.CPU=null))}},{key:"getNearestKeyframe",value:function(e){if(this.mediaInfo&&this.mediaInfo.keyframesIndex){var t=this.mediaInfo.keyframesIndex.times,n=this.mediaInfo.keyframesIndex.filepositions;return function e(r,i){var o=r.length,a=Math.floor(o/2);if(1===o){var s=t.indexOf(r[0]);return{keyframetime:r[0],keyframePoint:n[s]}}if(r[a]>i)return e(r.slice(0,a),i);if(r[a]<i)return e(r.slice(a),i);var u=t.indexOf(r[0]);return{keyframetime:r[0],keyframePoint:n[u]}}(t,e)}return 0}}]),t}(o.CustEvent);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(17)),o=n(0),a=u(n(4)),s=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.tag="fetch",r.fetching=!1,r.config=n,r.range={from:0,to:524288},r.src=e,r.totalRange=null,r.block=524288,r.reader=null,r.requestAbort=!1,r.arrivalDataCallback=null,r.bytesStart=0,r.heartbeat=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"isSupport",value:function(){return!(!self.fetch||!self.ReadableStream)}}]),r(t,[{key:"open",value:function(e,t){var n=this;this.requestAbort=!1;var r=new Headers,o=e||{from:0,to:-1};if(!this.config.isLive){this.range.from=o.from,this.range.to=o.to;var a=(0,i.default)(o,this.config);if("string"==typeof a)this.src=this.config.src+a;else for(var u in a)r.append(u,a[u])}t&&(this.bytesStart=0),this.bytesStart=e.from;var f={method:"GET",headers:r,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},c=Date.now();fetch(this.src,f).then((function(e){if(n.emit("performance",{type:"receive-first-package-duration",value:Date.now()-c}),e.ok){var r=e.body.getReader();return n.pump(r,t)}})).catch((function(e){n.emit("error",{errno:s.ERRORNO.NET_ERROR,errmsg:e.toString()})}))}},{key:"pause",value:function(){this.requestAbort=!0}},{key:"pump",value:function(e,t){var n=this;return e.read().then((function(r){if(r.done)n.emit("end"),a.default.verbose(n.tag,"load end");else{if(!0===n.requestAbort)return n.requestAbort=!1,e.cancel();var i=r.value.buffer;n.arrivalDataCallback&&(n.arrivalDataCallback(i,n.bytesStart,t),n.bytesStart+=i.byteLength),setTimeout((function(){n.pump(e)}),0)}})).catch((function(e){n.emit("error",{errno:s.ERRORNO.NET_ERROR,errmsg:e.message})}))}}]),t}(o.CustEvent);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("range"===t.seekType){var n={},r=void 0;return r=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",n.Range=r,n}return-1!==e.to?"?start="+e.from.toString()+"&end="+e.to.toString():"?start="+e.from.toString()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),a=(r=o)&&r.__esModule?r:{default:r},s=n(0),u=n(1),f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.tag="RangeLoader",r.xhr=null,r.src=e,r.totalLength=null,r.chunkSizeKB=524288,r.range={},r.bytesStart=0,r.needSeek=!1,r.keyframePoint=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"isSupport",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(e){return!1}}}]),i(t,[{key:"open",value:function(e,t){var n=this.xhr=new XMLHttpRequest;n.open("GET",this.src,!0),n.responseType="arraybuffer",n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.onProgress.bind(this),n.onload=this.onLoad.bind(this),n.onerror=this.onXhrError.bind(this);var r=e||{from:0,to:-1};this.range.from=r.from,-1===r.to&&(r.to=r.from+this.chunkSizeKB),t&&(this.bytesStart=e.from,this.needSeek=!0,this.keyframePoint=t),this.range.to=r.to;var i=(0,a.default)(r).headers;for(var o in i)n.setRequestHeader(o,i[o]);n.send()}},{key:"pause",value:function(){this.abort()}},{key:"abort",value:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr.abort(),this.xhr=null)}},{key:"destroy",value:function(){this.xhr&&(this.abort(),this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null),this.totalLength=null,this.bytesStart=null,this.range={}}},{key:"onReadyStateChange",value:function(e){var t=this.xhr;if(2===t.readyState&&(t.status<200||t.status>299)){var n={from:this.range.from,to:this.range.to,url:this.src,msg:"http Error: http code "+t.status};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:n})}}},{key:"onProgress",value:function(e){this.totalLength||(this.totalLength=e.total,this.abort(),this.open())}},{key:"onLoad",value:function(e){if(this.totalLength&&this.arrivalDataCallback){var t=e.target.response;this.needSeek?(this.needSeek=!1,this.arrivalDataCallback(t,this.bytesStart,this.keyframePoint)):this.arrivalDataCallback(t,this.bytesStart),this.bytesStart+=t.byteLength,this.open({from:this.bytesStart,to:-1})}}},{key:"onXhrError",value:function(e){var t={from:this.range.from,to:this.range.to,url:this.src,msg:e.constructor.name+" "+e.type};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:t})}}]),t}(s.CustEvent);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(1),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.tag="WebSocket",r.src=e,r._ws=null,r._requestAbort=!1,r._receivedLength=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"isSupported",value:function(){try{return void 0!==window.WebSocket}catch(e){return!1}}}]),r(t,[{key:"open",value:function(e,t){try{var n=this._ws=new self.WebSocket(this.src);n.binaryType="arraybuffer",n.onopen=this.onWebSocketOpen.bind(this),n.onclose=this.onWebSocketClose.bind(this),n.onmessage=this.onWebSocketMessage.bind(this),n.onerror=this.onWebSocketError.bind(this)}catch(e){var r={code:e.code,msg:e.message};this.emit("error",{errno:o.ERRORNO.NET_ERROR,errmsg:r})}}},{key:"pause",value:function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null}},{key:"onWebSocketClose",value:function(e){!0!==this._requestAbort?this.emit("end"):this._requestAbort=!1}},{key:"onWebSocketOpen",value:function(){}},{key:"onWebSocketMessage",value:function(e){var t=this;if(e.data instanceof ArrayBuffer)this.dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t.dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{var r={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};this.emit("error",{errno:o.ERRORNO.NET_ERROR,errmsg:r})}}},{key:"dispatchArrayBuffer",value:function(e){var t=e,n=this.receivedLength;this.receivedLength+=t.byteLength,this.arrivalDataCallback&&this.arrivalDataCallback(t,n)}},{key:"onWebSocketError",value:function(e){var t={code:e.code,msg:e.message};this.emit("error",{errno:o.ERRORNO.NET_ERROR,errmsg:t})}}]),t}(i.CustEvent);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),a=(r=o)&&r.__esModule?r:{default:r},s=n(0),u=n(1),f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.tag="mozChunkLoader",r.xhr=null,r.src=e,r.config=n,r.totalLength=null,r.chunkSizeKB=393216,r.range={},r.bytesStart=0,r.keyframePoint=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"isSupport",value:function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(e){return!1}}}]),i(t,[{key:"open",value:function(e,t){var n=this.xhr=new XMLHttpRequest;if(n.open("GET",this.src,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.onProgress.bind(this),n.onload=this.onLoadEnd.bind(this),n.onerror=this.onXhrError.bind(this),!this.config.isLive){var r=e||{from:0,to:-1};this.range.from=r.from,this.range.to=r.to,t&&(this.needSeek=!0,this.keyframePoint=t);var i=(0,a.default)(r).headers;for(var o in i)n.setRequestHeader(o,i[o])}n.send()}},{key:"pause",value:function(){this.abort()}},{key:"abort",value:function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr.abort(),this.xhr=null)}},{key:"destroy",value:function(){this.xhr&&(this.abort(),this.xhr.onreadystatechange=null,this.xhr.onprogress=null,this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null),this.totalLength=null,this.bytesStart=null,this.range={}}},{key:"onReadyStateChange",value:function(e){var t=this.xhr;if(2===t.readyState&&(t.status<200||t.status>299)){var n={from:this.range.from,to:this.range.to,url:this.src,msg:"http Error: http code "+t.status};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:n})}}},{key:"onProgress",value:function(e){this.totalLength||(this.totalLength=e.total,null!==e.total&&0!==e.total&&(this.totalLength=e.total));var t=e.target.response;this.needSeek?(this.needSeek=!1,this.arrivalDataCallback(t,this.bytesStart,this.keyframePoint)):this.arrivalDataCallback(t,this.bytesStart),this.bytesStart+=t.byteLength}},{key:"onLoadEnd",value:function(e){this.emit(this.tag,"video load end")}},{key:"onXhrError",value:function(e){var t={from:this.range.from,to:this.range.to,url:this.src,msg:e.constructor.name+" "+e.type};this.emit("error",{errno:u.ERRORNO.NET_ERROR,errmsg:t})}}]),t}(s.CustEvent);t.default=f},function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var a=t.toString(),s=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var u,f=s[1],c=new RegExp("(\\\\n|\\W)"+i(f)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(a);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(c=new RegExp("\\("+i(f)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(a);)e[u[2]]||(o[r].push(u[1]),e[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var l,d=Object.keys(o),h=0;h<d.length;h++)for(var p=0;p<o[d[h]].length;p++)l=o[d[h]][p],isNaN(1*l)||(o[d[h]][p]=1*o[d[h]][p]);return o}function a(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},s=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};a(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var f=s[u],c=n[f].pop();if(i[f]=i[f]||{},!i[f][c]&&e[f][c]){i[f][c]=!0,r[f]=r[f]||[],r[f].push(c);for(var l=o(e,e[f][c],f),d=Object.keys(l),h=0;h<d.length;h++)n[d[h]]=n[d[h]]||[],n[d[h]]=n[d[h]].concat(l[d[h]])}}return r}(i,e),u="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var f=new window.Blob([u],{type:"text/javascript"});if(t.bare)return f;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(f),l=new window.Worker(c);return l.objectURL=c,l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(23)),o=s(n(8)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tempUint8=new Uint8Array,this.arrTag=[],this.index=0,this.tempArr=[],this.stop=!1,this.offset=0,this.frist=!0,this._hasAudio=!1,this._hasVideo=!1,this._dispose=!1,this.busy=!1,this.busyArr=[]}return r(e,[{key:"setFlv",value:function(e){return this.busy=!0,this._dispose=!1,this.stop=!1,this.arrTag=[],this.index=0,this.tempUint8=e,this.tempUint8.length>13&&70==this.tempUint8[0]&&76==this.tempUint8[1]&&86==this.tempUint8[2]?(this.probe(this.tempUint8.buffer),this.read(9),this.read(4),this.parse(),this.frist=!1,this.busy=!1,this.offset):(this.frist||this.parse(),this.offset)}},{key:"probe",value:function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var r=(4&t[4])>>>2!=0,i=0!=(1&t[4]);return r||i?(this._hasAudio=o.default._hasAudio=r,this._hasVideo=o.default._hasVideo=i,{match:!0,hasAudioTrack:r,hasVideoTrack:i}):n}},{key:"dispose",value:function(){}},{key:"parse",value:function(){for(;this.index<this.tempUint8.length&&!this.stop;){this.offset=this.index;var e=new i.default;if(this.tempUint8.length-this.index>=11){if(e.tagType=this.read(1)[0],e.dataSize=this.read(3),e.Timestamp=this.read(4),e.StreamID=this.read(3),18!=e.tagType&&8!=e.tagType&&9!=e.tagType)throw new a.default("wrong tagType"+e.tagType);this.tempUint8.length-this.index>=this.getBodySum(e.dataSize)+4?(e.body=this.read(this.getBodySum(e.dataSize)),9==e.tagType&&this._hasVideo&&this.arrTag.push(e),8==e.tagType&&this._hasAudio&&this.arrTag.push(e),18==e.tagType&&this.arrTag.push(e),e.size=this.read(4),this.offset=this.index):this.stop=!0}else this.stop=!0}return this.offset}},{key:"read",value:function(e){var t=this.tempUint8.slice(this.index,this.index+e);return this.index+=e,t}},{key:"getBodySum",value:function(e){var t="";return t+=1==e[0].toString(16).length?"0"+e[0].toString(16):e[0].toString(16),t+=1==e[1].toString(16).length?"0"+e[1].toString(16):e[1].toString(16),t+=1==e[2].toString(16).length?"0"+e[2].toString(16):e[2].toString(16),parseInt(t,16)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagType=-1,this.dataSize=-1,this.Timestamp=-1,this.StreamID=-1,this.body=-1,this.time=-1,this.arr=[],this.size=-1}return r(e,[{key:"getTime",value:function(){this.arr=[];for(var e=0;e<this.Timestamp.length;e++)this.arr.push(1==this.Timestamp[e].toString(16).length?"0"+this.Timestamp[e].toString(16):this.Timestamp[e].toString(16));this.arr.pop();var t=this.arr.join("");return this.time=parseInt(t,16),parseInt(t,16)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(25));function o(e){return e&&e.__esModule?e:{default:e}}o(n(9));var a=null,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parseObject",value:function(t,n,r){var i=e.parseString(t,n,r),o=e.parseScript(t,n+i.size),a=o.objectEnd;return{data:{name:i.data,value:o.data},size:o.size,objectEnd:a}}},{key:"parseVariable",value:function(t,n,r){return e.parseObject(t,n,r)}},{key:"parseLongString",value:function(e,t,n){var r=new DataView(e,t).getUint32(0,!a);return{data:r>0?(0,i.default)(new Uint8Array(e,t+4,r)):"",size:4+r}}},{key:"parseDate",value:function(e,t,n){var r=new DataView(e,t),i=r.getFloat64(0,!a),o=r.getInt16(8,!a);return{data:new Date(i+=60*o*1e3),size:10}}},{key:"parseString",value:function(e,t,n){var r=new DataView(e,t).getUint16(0,!a);return{data:r>0?(0,i.default)(new Uint8Array(e,t+2,r)):"",size:2+r}}},{key:"parseMetadata",value:function(t){var n;n=new ArrayBuffer(2),new DataView(n).setInt16(0,256,!0),a=256===new Int16Array(n)[0];var r=e.parseScript(t,0),i=e.parseScript(t,r.size,t.length-r.size),o={};return o[r.data]=i.data,o}},{key:"parseScript",value:function(t,n,r){var i=n,o=new Uint8Array(t).buffer,s=new DataView(o,0,r),u=null,f=s.getUint8(i);switch(i+=1,f){case 0:u=s.getFloat64(i,!a),i+=8;break;case 1:u=!!s.getUint8(i),i+=1;break;case 2:var c=e.parseString(o,i);u=c.data,i+=c.size;break;case 3:u={};var l=0;for(9==(16777215&s.getUint32(r-4,!a))&&(l=3);i<r-4;){var d=e.parseObject(o,i,r-n-l);if(d.objectEnd)break;u[d.data.name]=d.data.value,i=d.size}i<=r-3&&9==(16777215&v.getUint32(i-1,!a))&&(i+=3);break;case 8:for(u={},i+=4,s.getUint32(r-4,!a);i<r-8;){var h=e.parseVariable(o,i);if(h.objectEnd)break;u[h.data.name]=h.data.value,i=h.size}i<=r-3&&9==(16777215&s.getUint32(i-1,!a))&&(i+=3);break;case 9:u=void 0,i=1;break;case 10:u=[];var p=s.getUint32(i,!a);i+=4;for(var m=0;m<p;m++){var y=e.parseScript(o,i);u.push(y.data),i=y.size}break;case 11:var g=e.parseDate(o,i+1,r-1);u=g.data,i+=g.size;break;case 12:var b=e.parseString(o,i+1,r-1);u=b.data,i+=b.size;break;default:i=r,console.log("AMF","Unsupported AMF value type "+f)}return{data:u,size:i}}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t,n){var r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=e,i=0,o=e.length;i<o;)if(n[i]<128)t.push(String.fromCharCode(n[i])),++i;else{if(n[i]<192);else if(n[i]<224){if(r(n,i,1)){var a=(31&n[i])<<6|63&n[i+1];if(a>=128){t.push(String.fromCharCode(65535&a)),i+=2;continue}}}else if(n[i]<240){if(r(n,i,2)){var s=(15&n[i])<<12|(63&n[i+1])<<6|63&n[i+2];if(s>=2048&&55296!=(63488&s)){t.push(String.fromCharCode(65535&s)),i+=3;continue}}}else if(n[i]<248&&r(n,i,3)){var u=(7&n[i])<<18|(63&n[i+1])<<12|(63&n[i+2])<<6|63&n[i+3];if(u>65536&&u<1114112){u-=65536,t.push(String.fromCharCode(u>>>10|55296)),t.push(String.fromCharCode(1023&u|56320)),i+=4;continue}}t.push(String.fromCharCode(65533)),++i}return t.join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG=this.constructor.name,this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=8*t.byteLength,this._current_word=0,this._current_word_bits_left=0}return r(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(e>32)throw new InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;var r=e-this._current_word_bits_left;this._fillCurrentWord();var i=Math.min(r,this._current_word_bits_left),o=this._current_word>>>32-i;return this._current_word<<=i,this._current_word_bits_left-=i,n=n<<i|o}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return r(e,[{key:"isComplete",value:function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(29)),o=u(n(30)),a=u(n(10)),s=n(31);function u(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="MP4Remuxer",this._isLive=!0===t.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new s.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new s.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!o.default.chrome||!(o.default.version.major<50||50===o.default.version.major&&o.default.version.build<2661)),this._fillSilentAfterSeek=o.default.msedge||o.default.msie,this._mp3UseMpegAudio=!o.default.firefox}return r(e,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(e){this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(e,t){if(!this._onMediaSegment)throw new IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}},{key:"_onTrackMetadataReceived",value:function(e,t){var n=null,r="mp4",i=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(r="mpeg",i="",n=new Uint8Array):n=a.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=a.default.generateInitSegment(t)}if(!this._onInitSegment)throw new IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:i,container:e+"/"+r,mediaDuration:t.duration})}},{key:"_calculateDtsBase",value:function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"_remuxAudio",value:function(e){if(null!=this._audioMeta){var t,n=e,r=n.samples,o=void 0,u=-1,f=this._audioMeta.refSampleDuration,c="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,l=this._dtsBaseInited&&void 0===this._audioNextDts,d=!1;if(r&&!(r.length<=1)){var h=0,p=null,v=0;c?(h=0,v=n.length):(h=8,v=8+n.length);var m=r[0].dts-this._dtsBase;if(this._audioNextDts)o=m-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())o=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(d=!0);else{var y=this._audioSegmentInfoList.getLastSampleBefore(m);if(null!=y){var g=m-(y.originalDts+y.duration);g<=3&&(g=0),o=m-(y.dts+y.duration+g)}else o=0}if(d){var b=m-o,_=this._videoSegmentInfoList.getLastSegmentBefore(m);if(null!=_&&_.beginDts<b){var w=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(w){var S=_.beginDts,k=b-_.beginDts;Log.v(this.TAG,"InsertPrefixSilentAudio: dts: "+S+", duration: "+k),r.unshift({unit:w,dts:S,pts:S}),v+=w.byteLength}}else d=!1}var E=[];o=0;for(var O=0;O+1<r.length;O++){var T=r[O],A=(T.unit,T.dts-this._dtsBase),x=A-o;-1===u&&(u=x);var R=0;R=O!==r.length-1?r[O+1].dts-this._dtsBase-o-x:E.length>=1?E[E.length-1].duration:Math.floor(f),E.push({dts:x,pts:x,cts:0,unit:T.unit,size:T.unit.byteLength,duration:R,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}})}if(c)p=new Uint8Array(v);else{for(var M=8,D=0;D<E.length;++D)M+=E[D].size;(p=new Uint8Array(M))[0]=M>>>24&255,p[1]=M>>>16&255,p[2]=M>>>8&255,p[3]=255&M,p.set(a.default.types.mdat,4)}for(var L=0;L<E.length;L++){var P=E[L].unit;p.set(P,h),h+=P.byteLength}var B=E[E.length-1];t=B.dts+B.duration,this._audioNextDts=t;var C=new s.MediaSegmentInfo;C.beginDts=u,C.endDts=t,C.beginPts=u,C.endPts=t,C.originalBeginDts=E[0].originalDts,C.originalEndDts=B.originalDts+B.duration,C.firstSample=new s.SampleInfo(E[0].dts,E[0].pts,E[0].duration,E[0].originalDts,!1),C.lastSample=new s.SampleInfo(B.dts,B.pts,B.duration,B.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(C),n.samples=E,n.sequenceNumber++;var I=null;I=c?new Uint8Array:a.default.moof(n,u),n.samples=[r[r.length-1]],n.length=0;var j={type:"audio",data:this._mergeBoxes(I,p).buffer,sampleCount:E.length,info:C};c&&l&&(j.timestampOffset=u),this._onMediaSegment("audio",j)}}}},{key:"_remuxVideo",value:function(e){if(null!=this._videoMeta){var t,n,r=e,i=r.samples,o=void 0,u=-1,f=-1;if(i&&!(i.length<=1)){var c=i[0].dts-this._dtsBase;if(this._videoNextDts)o=Math.max(c-this._videoNextDts,0);else if(this._videoSegmentInfoList.isEmpty())o=0;else{var l=this._videoSegmentInfoList.getLastSampleBefore(c);if(null!=l){var d=c-(l.originalDts+l.duration);d<=3&&(d=0),o=c-(l.dts+l.duration+d)}else o=0}var h=new s.MediaSegmentInfo,p=[],v=o;o=0;for(var m=0;m+1<i.length;m++){var y=i[m],g=y.dts-this._dtsBase-(0==m?v:0),b=y.isKeyframe,_=g-o,w=y.cts,S=_+w;-1===u&&(u=_,f=S);var k=0;if(k=m!==i.length-1?i[m+1].dts-this._dtsBase-o-_:p.length>=1?p[p.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),b){var E=new s.SampleInfo(_,S,k,y.dts,!0);E.fileposition=y.fileposition,h.appendSyncPoint(E)}p.push({dts:_,pts:S,cts:w,units:y.units,size:y.length,isKeyframe:b,duration:k,originalDts:g,flags:{isLeading:0,dependsOn:b?2:1,isDependedOn:b?1:0,hasRedundancy:0,isNonSync:b?0:1}})}for(var O=8,T=8,A=0;A<p.length;++A)T+=p[A].size;var x=new Uint8Array(T);x[0]=T>>>24&255,x[1]=T>>>16&255,x[2]=T>>>8&255,x[3]=255&T,x.set(a.default.types.mdat,4);for(var R=0;R<p.length;R++)for(var M=p[R].units;M.length;){var D=M.shift().data;x.set(D,O),O+=D.byteLength}var L=p[p.length-1];if(t=L.dts+L.duration,n=L.pts+L.duration,this._videoNextDts=t,h.beginDts=u,h.endDts=t,h.beginPts=f,h.endPts=n,h.originalBeginDts=p[0].originalDts,h.originalEndDts=L.originalDts+L.duration,h.firstSample=new s.SampleInfo(p[0].dts,p[0].pts,p[0].duration,p[0].originalDts,p[0].isKeyframe),h.lastSample=new s.SampleInfo(L.dts,L.pts,L.duration,L.originalDts,L.isKeyframe),this._isLive||this._videoSegmentInfoList.append(h),r.samples=p,r.sequenceNumber++,this._forceFirstIDR){var P=p[0].flags;P.dependsOn=2,P.isNonSync=0}var B=a.default.moof(r,u);r.samples=[i[i.length-1]],r.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(B,x).buffer,sampleCount:p.length,info:h})}}}},{key:"_mergeBoxes",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getSilentFrame",value:function(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],i={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:n[0]||""},o={};if(i.browser){o[i.browser]=!0;var a=i.majorVersion.split(".");o.version={major:parseInt(i.majorVersion,10),string:i.version},a.length>1&&(o.version.minor=parseInt(a[1],10)),a.length>2&&(o.version.build=parseInt(a[2],10))}for(var s in i.platform&&(o[i.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,i.browser="msie",o.msie=!0),o.edge&&(delete o.edge,i.browser="msedge",o.msedge=!0),o.opr&&(i.browser="opera",o.opera=!0),o.safari&&o.android&&(i.browser="android",o.android=!0),o.name=i.browser,o.platform=i.platform,r)r.hasOwnProperty(s)&&delete r[s];r=o}(),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SampleInfo=function e(t,n,r,o,a){i(this,e),this.dts=t,this.pts=n,this.duration=r,this.originalDts=o,this.isSyncPoint=a,this.fileposition=null},t.MediaSegmentInfo=function(){function e(){i(this,e),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return r(e,[{key:"appendSyncPoint",value:function(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}]),e}(),t.IDRSampleList=function(){function e(){i(this,e),this._list=[]}return r(e,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}},{key:"getLastSyncPointBeforeDts",value:function(e){if(0==this._list.length)return null;var t=this._list,n=0,r=t.length-1,i=0,o=0,a=r;for(e<t[0].dts&&(n=0,o=a+1);o<=a;){if((i=o+Math.floor((a-o)/2))===r||e>=t[i].dts&&e<t[i+1].dts){n=i;break}t[i].dts<e?o=i+1:a=i-1}return this._list[n]}}]),e}(),t.MediaSegmentInfoList=function(){function e(t){i(this,e),this._type=t,this._list=[],this._lastAppendLocation=-1}return r(e,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,r=0,i=0,o=n,a=0;if(e<t[0].originalBeginDts)return a=-1;for(;i<=o;){if((r=i+Math.floor((o-i)/2))===n||e>t[r].lastSample.originalDts&&e<t[r+1].originalBeginDts){a=r;break}t[r].originalBeginDts<e?i=r+1:o=r-1}return a}},{key:"_searchNearestSegmentAfter",value:function(e){return this._searchNearestSegmentBefore(e)+1}},{key:"append",value:function(e){var t=this._list,n=e,r=this._lastAppendLocation,i=0;-1!==r&&r<t.length&&n.originalBeginDts>=t[r].lastSample.originalDts&&(r===t.length-1||r<t.length-1&&n.originalBeginDts<t[r+1].originalBeginDts)?i=r+1:t.length>0&&(i=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,n)}},{key:"getLastSegmentBefore",value:function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}},{key:"getLastSampleBefore",value:function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null}},{key:"getLastSyncPointBefore",value:function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&t>0;)t--,n=this._list[t].syncPoints;return n.length>0?n[n.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null,n=null,a={};function s(e,t){self.postMessage({cmd:"mediaSegmentInit",source:{type:"video",data:e}}),t&&self.postMessage({cmd:"mediaSegmentInit",source:{type:"audio",data:t}})}function u(e,t){self.postMessage({cmd:"mediaSegment",source:{type:e,data:t}})}function f(e){self.postMessage({cmd:"error",source:e})}function c(e){self.postMessage({cmd:"mediainfo",source:e})}function l(e){self.postMessage({cmd:"cdnDropFrame",source:e})}function d(e,n,i){return t||((t=new r.default(a)).onInitSegment=s,t.onMediaSegment=u,t.onError=f,t.onMediaInfo=c,t.onCdnDropFrame=l,t.on("error",(function(e){self.postMessage({cmd:"error",source:e.data})}))),i&&t.seek(i),self.postMessage({cmd:"player-event",source:{type:o.PLAYER_EVENTS.MEDIA_DEMUX_FLV,ts:Date.now()}}),t.setflv(e)}e.addEventListener("message",(function(e){switch(e.data.cmd){case"init":a=e.data.data;break;case"loadSource":(n=new i.default(a))&&(n.on("end",(function(){self.postMessage({cmd:"end"})})),n.on("error",(function(e){self.postMessage({cmd:"error",source:e.data})})),n.on("heartbeat",(function(e){self.postMessage({cmd:"heartbeat",source:e.data})})),n.on("player-event",(function(e){self.postMessage({cmd:"player-event",source:e.data})}))),n.arrivalDataCallback=d,n.open();break;case"pause":n.pause();break;case"seek":o=e.data.keyframe,n.seek(o.keyframePoint,!1,o.keyframetime);break;case"resume":n.resume();break;case"destroy":n&&(n.destroy(),(r=n)&&(r.off("end"),r.off("error"),r.off("heartbeat"),r.off("player-event")),n=null),t&&(t.off("error"),t=null)}var r,o}))};var r=a(n(7)),i=a(n(5)),o=n(2);function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isLive:!1,box:"flv",seekInKeyframe:!0,alwaysSeekKeyframe:!0,lazyLoadMaxDuration:120,lazyLoadRecoverDuration:30,lockInternalProperty:!1,debug:!0,webWorker:!1,autoCleanupSourceBuffer:!0,autoCleanupMaxBackwardDuration:10,autoCleanupMinBackwardDuration:10,stashSize:393216,seekType:"range"}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),o=n(2),a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.reset(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"reset",value:function(){this.loaderOpenTs=0,this.receiveFirstPackageTs=0,this.firstDemuxFlvTs=0,this.firstSegmentTs=0,this.firstPlay=0}},{key:"record",value:function(e){e.ts=e.ts||Date.now(),this.firstPlay||this.processFirstPlayData(e)}},{key:"processFirstPlayData",value:function(e){switch(e.type){case o.PLAYER_EVENTS.LOADER_CHUNK_ARRIVAL:this.receiveFirstPackageTs||(this.receiveFirstPackageTs=e.ts,this.emit("performance",{type:"receive-first-package-duration",value:this.receiveFirstPackageTs-this.loaderOpenTs}));break;case o.PLAYER_EVENTS.MEDIA_DEMUX_FLV:this.firstDemuxFlvTs||(this.firstDemuxFlvTs=e.ts,this.emit("performance",{type:"first-flv-package-duration",value:this.firstDemuxFlvTs-this.receiveFirstPackageTs}));break;case o.PLAYER_EVENTS.MEDIA_SEGMENT:this.firstSegmentTs||(this.firstSegmentTs=e.ts,this.emit("performance",{type:"first-flv-to-mp4",value:this.firstSegmentTs-this.firstDemuxFlvTs}));break;case o.PLAYER_EVENTS.LOADER_OPEN:this.loaderOpenTs||(this.loaderOpenTs=e.ts,this.emit("performance",{type:"first_loader_open_timestamp",value:this.loaderOpenTs}));break;case o.PLAYER_EVENTS.PLAYING:case o.PLAYER_EVENTS.CANPLAY:case o.PLAYER_EVENTS.TIMEUPDATE:this.firstPlay||(this.firstPlay=e.ts,this.emit("performance",{type:"first_video_frame_duration",value:this.firstPlay-this.firstSegmentTs}))}}}]),t}(i.CustEvent);t.default=a}]).default},e.exports=r()}}]);